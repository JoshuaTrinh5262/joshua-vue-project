"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[6308],{1721:function(e,t,l){l.d(t,{A:function(){return d}});var a=l(9726);const n={class:"notification-heading"},o={class:"notification-title"},u={class:"notification-content"};function s(e,t,l,s,i,c){return null!==e.notification?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["notification",`alert-${e.notification.type}`])},[(0,a.Lk)("div",n,[(0,a.Lk)("div",o,(0,a.v_)(e.notification.title),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.closeNotification&&e.closeNotification(...t)),class:"close"},t[1]||(t[1]=[(0,a.Lk)("span",null,"×",-1)]))]),(0,a.Lk)("div",u,(0,a.v_)(e.notification.content),1)],2)):(0,a.Q3)("",!0)}var i=(0,a.pM)({name:"NotificationComponent",props:{notification:{type:Object,required:!1}},setup(e,{emit:t}){const l=()=>{t("update:notification",null)};return(0,a.wB)((()=>e.notification),(e=>{e&&setTimeout((()=>{l()}),2e3)})),{closeNotification:l}}}),c=l(6262);const r=(0,c.A)(i,[["render",s],["__scopeId","data-v-4cf65ca2"]]);var d=r},309:function(e,t,l){l.d(t,{A:function(){return p}});var a=l(9726);const n={class:"tag-container"},o={class:"tags"},u={key:0},s=["onClick"],i=["value"];function c(e,t,l,c,r,d){return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",o,[0===e.selected.length?((0,a.uX)(),(0,a.CE)("div",u,"No selected value.")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.selected,(t=>((0,a.uX)(),(0,a.CE)("span",{key:t.id,class:"tag"},[(0,a.eW)((0,a.v_)(t.name)+" ",1),(0,a.Lk)("button",{class:"remove-tag",onClick:l=>e.removeItem(t)},"x",8,s)])))),128))]),(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),onInput:t[1]||(t[1]=(...t)=>e.onSearch&&e.onSearch(...t)),class:"form-control search-input"},null,544),[[a.Jo,e.searchQuery]]),e.showOptions?((0,a.uX)(),(0,a.CE)("select",{key:0,onChange:t[2]||(t[2]=(...t)=>e.updateSelectedItems&&e.updateSelectedItems(...t)),multiple:"",class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.filteredItems,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,a.v_)(e.name),9,i)))),128))],32)):(0,a.Q3)("",!0)])}var r=(0,a.pM)({name:"TagSelector",props:{items:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:t}){const l=(0,a.KR)([...e.modelValue]),n=(0,a.KR)(""),o=(0,a.KR)(!1),u=(0,a.EW)((()=>e.items.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),s=e=>l.value.some((t=>t.id===e.id)),i=e=>{l.value=l.value.filter((t=>t.id!==e.id)),t("update:modelValue",l.value)},c=()=>{o.value=""!==n.value.trim()&&u.value.length>0},r=a=>{const n=Array.from(a.target.selectedOptions);n.forEach((t=>{const a=t.value,n=e.items.find((e=>e.id===a));n&&(s(n)?l.value=l.value.filter((e=>e.id!==n.id)):l.value.push(n))})),t("update:modelValue",l.value)};return(0,a.wB)((()=>e.modelValue),(e=>{l.value=[...e]}),{immediate:!0}),{selected:l,searchQuery:n,filteredItems:u,showOptions:o,onSearch:c,removeItem:i,updateSelectedItems:r,isSelected:s}}}),d=l(6262);const m=(0,d.A)(r,[["render",c],["__scopeId","data-v-286852e2"]]);var p=m},1963:function(e,t,l){l.r(t),l.d(t,{default:function(){return j}});var a=l(9726);const n={class:"position-relative form-group"},o={class:"position-relative form-group"},u={class:"position-relative form-group"},s={class:"position-relative form-group"},i={class:"position-relative form-group"};function c(e,t,l,c,r,d){const m=(0,a.g2)("PageTitleComponent"),p=(0,a.g2)("notification-component"),b=(0,a.g2)("TagSelectorComponent"),v=(0,a.g2)("button-spinner"),k=(0,a.g2)("ModalComponent"),g=(0,a.g2)("AlbumTable");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(m,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,a.k6)((()=>[(0,a.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.toggleModal&&e.toggleModal(...t)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,a.bF)(p,{notification:e.notification,"onUpdate:notification":t[1]||(t[1]=t=>e.notification=t)},null,8,["notification"]),(0,a.bF)(k,{title:e.isUpdateMode?"Update Album":"Add New Album",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,a.k6)((()=>[(0,a.Lk)("div",n,[t[7]||(t[7]=(0,a.Lk)("label",{for:"name"},"Album Name",-1)),(0,a.bo)((0,a.Lk)("input",{name:"album_name",placeholder:"Album Name","onUpdate:modelValue":t[2]||(t[2]=t=>e.currentAlbum.name=t),type:"text",class:"form-control"},null,512),[[a.Jo,e.currentAlbum.name]])]),(0,a.Lk)("div",o,[t[9]||(t[9]=(0,a.Lk)("label",{for:"album_type"},"Album Type",-1)),(0,a.bo)((0,a.Lk)("select",{id:"album_type","onUpdate:modelValue":t[3]||(t[3]=t=>e.currentAlbum.album_type=t),class:"form-control"},t[8]||(t[8]=[(0,a.Lk)("option",{value:"single"},"Single",-1),(0,a.Lk)("option",{value:"extended_play"},"Extended Play",-1),(0,a.Lk)("option",{value:"album"},"Album",-1)]),512),[[a.u1,e.currentAlbum.album_type]])]),(0,a.Lk)("div",u,[t[10]||(t[10]=(0,a.Lk)("label",{for:"ensemble_as"},"Ensemble As",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",name:"ensemble_as",placeholder:"Ensemble As","onUpdate:modelValue":t[4]||(t[4]=t=>e.currentAlbum.ensemble_as=t),class:"form-control"},null,512),[[a.Jo,e.currentAlbum.ensemble_as]])]),(0,a.Lk)("div",s,[t[11]||(t[11]=(0,a.Lk)("label",{for:"name"},"Release Date",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",name:"release_date",placeholder:"Album Release Date","onUpdate:modelValue":t[5]||(t[5]=t=>e.currentAlbum.released_date=t),class:"form-control"},null,512),[[a.Jo,e.currentAlbum.released_date]])]),(0,a.Lk)("div",i,[t[12]||(t[12]=(0,a.Lk)("label",{for:"talent"},"Talent",-1)),(0,a.bF)(b,{items:e.talentOptions,"model-value":e.selectedTalents,"onUpdate:modelValue":e.handleselectedTalentsChange},null,8,["items","model-value","onUpdate:modelValue"])])])),footer:(0,a.k6)((()=>[(0,a.Lk)("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,a.bF)(v,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Album":"Add New Album"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,a.bF)(g,{ref:"albumTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var r=l(1313),d=l(8277),m=l(1721),p=l(6423),b=l(309);const v={class:"form-inline"},k={class:"input-group mb-2"},g={class:"table table-hover table-sm table-bordered"},y=["id","onClick"],h={key:0},f={key:1},L={key:2},C=["href"],A=["onClick"],_=["onClick"],E=["onClick"],K={key:0,class:"details-row"},w={colspan:"6"},P={key:1},S=["colspan"],R=["id","onClick"],D={key:0},T={key:1},X={key:2};function I(e,t,l,n,o,u){const s=(0,a.g2)("pagination-component");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",v,[(0,a.Lk)("div",k,[(0,a.bo)((0,a.Lk)("input",{placeholder:"Searching...",onInput:t[0]||(t[0]=(...t)=>e.onSearch&&e.onSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=t=>e.search=t),type:"text",class:"form-control",name:"search"},null,544),[[a.Jo,e.search]]),t[2]||(t[2]=(0,a.Lk)("div",{class:"input-group-append"},[(0,a.Lk)("button",{class:"btn btn-primary"},[(0,a.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,a.Lk)("table",g,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[t[3]||(t[3]=(0,a.Lk)("th",null,[(0,a.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.fields,(t=>((0,a.uX)(),(0,a.CE)("th",{key:t.key,id:t.key,onClick:l=>e.changeOrder(t.key)},[(0,a.eW)((0,a.v_)(t.value)+" ",1),e.orderBy===t.key&&"asc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",h,"▼")):e.orderBy===t.key&&"desc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",f,"▲")):((0,a.uX)(),(0,a.CE)("span",L,"◆"))],8,y)))),128)),t[4]||(t[4]=(0,a.Lk)("th",null,"Action",-1))])]),(0,a.Lk)("tbody",null,[e.items.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.items,((l,n)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:n},[(0,a.Lk)("tr",null,[t[7]||(t[7]=(0,a.Lk)("td",null,[(0,a.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,a.Lk)("td",null,(0,a.v_)(l.id),1),(0,a.Lk)("td",null,[(0,a.Lk)("a",{href:`album/${l.id}`},(0,a.v_)(l.name),9,C)]),(0,a.Lk)("td",null,(0,a.v_)(l.album_type),1),(0,a.Lk)("td",null,(0,a.v_)(l.discography_count),1),(0,a.Lk)("td",null,(0,a.v_)(l.released_date),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:t=>e.handleUpdate(l)},t[5]||(t[5]=[(0,a.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,A),(0,a.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:t=>e.handleDelete(l.id)},t[6]||(t[6]=[(0,a.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,_),(0,a.Lk)("button",{type:"button",onClick:t=>e.toggleDetails(n),class:"btn btn-sm btn-info"},[(0,a.Lk)("i",{class:(0,a.C4)(["pe-7s-angle-right",e.expandedRows[n]?"rotate-icon":""])},null,2)],8,E)])]),e.expandedRows[n]?((0,a.uX)(),(0,a.CE)("tr",K,[(0,a.Lk)("td",w,[(0,a.Lk)("div",null,[t[8]||(t[8]=(0,a.Lk)("p",null,"Talens: ",-1)),(0,a.Lk)("p",null,(0,a.v_)(l.talents),1)]),(0,a.Lk)("div",null,[t[9]||(t[9]=(0,a.Lk)("p",null,"Album Description: ",-1)),(0,a.Lk)("p",null,(0,a.v_)(l.album_description),1)])])])):(0,a.Q3)("",!0)],64)))),128)):((0,a.uX)(),(0,a.CE)("tr",P,[(0,a.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,S)]))]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[t[10]||(t[10]=(0,a.Lk)("th",null,[(0,a.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.fields,(t=>((0,a.uX)(),(0,a.CE)("th",{key:t.key,id:t.key,onClick:l=>e.changeOrder(t.key)},[(0,a.eW)((0,a.v_)(t.value)+" ",1),e.orderBy===t.key&&"asc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",D,"▼")):e.orderBy===t.key&&"desc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",T,"▲")):((0,a.uX)(),(0,a.CE)("span",X,"◆"))],8,R)))),128)),t[11]||(t[11]=(0,a.Lk)("th",null,"Action",-1))])])]),(0,a.bF)(s,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var U=l(9794),x=l(9274),M=l(7189),V=(0,a.pM)({name:"AlbumTable",components:{ModalComponent:r.A,TableComponent:U.A,PaginationComponent:x.A,NotificationComponent:m.A,ButtonSpinner:p.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:t}){const l=(0,a.KR)("released_date"),n=(0,a.KR)("desc"),o=(0,a.KR)(1),u=(0,a.KR)(20),s=(0,a.KR)(0),i=(0,a.KR)(0),c=(0,a.KR)(""),r=(0,a.KR)([]),d=[{key:"id",value:"ID"},{key:"name",value:"Album Name"},{key:"album_type",value:"Album Type"},{key:"discography_count",value:"Discography"},{key:"released_date",value:"Released Date"}],m=(0,a.KR)([]),p=async()=>{c.value&&(o.value=1);const e=await M.K.getAlbumsWithPaging(o.value,u.value,l.value,n.value,c.value);e.error||(m.value=e.items,s.value=e.totalItems,i.value=e.totalPages,u.value=u.value)},b=e=>{t("handleUpdate",e)},v=async e=>{const l=confirm(`Are you sure you want to delete Album ${e}?`);l&&t("handleDelete",e)},k=e=>{o.value=e,p()},g=()=>{o.value=1,p()},y=e=>{e===l.value?"asc"===n.value?n.value="desc":"desc"===n.value?n.value="":n.value="asc":(l.value=e,n.value="asc"),p()},h=async e=>{u.value=e,o.value=1,await p()},f=e=>{r.value[e]=!r.value[e]};return(0,a.sV)((()=>{p()})),{currentPage:o,itemsPerPage:u,totalItems:s,totalPages:i,fields:d,items:m,search:c,orderBy:l,orderDirection:n,expandedRows:r,loadPage:k,changePageSize:h,onSearch:g,changeOrder:y,handleDelete:v,handleUpdate:b,getAlbumsData:p,toggleDetails:f}}}),F=l(6262);const N=(0,F.A)(V,[["render",I]]);var O=N,B=(0,a.pM)({name:"AlbumsPage",components:{ModalComponent:r.A,PageTitleComponent:d.A,NotificationComponent:m.A,ButtonSpinner:p.A,TagSelectorComponent:b.A,AlbumTable:O},setup(){const e=(0,a.KR)("Albums"),t=(0,a.KR)("Albums Pages"),l=(0,a.KR)("pe-7s-album icon-gradient bg-tempting-azure"),n=(0,a.KR)(!1),o=(0,a.KR)(!1),u=(0,a.KR)(!1),s=(0,a.KR)(null),i=(0,a.Kh)({name:null,album_type:null,ensemble_as:null,released_date:null}),c=(0,a.KR)(null),r=(0,a.KR)([]),d=(0,a.KR)([]),m=async()=>{const e=await M.K.getTalents();r.value=e},p=async()=>{u.value=!0,n.value?v():b()},b=async()=>{try{await M.K.createAlbum(i,d.value),k(),g(),y(),u.value=!1,s.value={title:"Success",content:"Album created successfully!",type:"success"},y()}catch(e){u.value=!1,s.value={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}},v=async()=>{try{await M.K.updateAlbum(i,d.value),k(),g(),y(),u.value=!1,s.value={title:"Success",content:"Album updated successfully!",type:"success"},y(),n.value=!1}catch(e){u.value=!1,s.value={title:"Error",content:`Error when updating Album: ${e}`,type:"danger"},n.value=!1}},k=()=>{Object.assign(i,{name:null,album_type:null,ensemble_as:null,released_date:null}),i.id&&delete i.id,d.value=[]},g=()=>{n.value=!1,k(),o.value=!o.value},y=()=>{c.value&&c.value.getAlbumsData()},h=e=>{n.value=!0,e&&(i.id=e.id,i.name=e.name,i.album_type=e.album_type,i.ensemble_as=e.ensemble_as,i.released_date=e.released_date,d.value=e.album_talent.map((e=>({id:e.talent.id,name:e.talent.name})))),o.value=!0},f=async e=>{try{await M.K.deleteAlbum(e),s.value={title:"Success",content:"Album deleted successfully!",type:"success"},y()}catch(t){s.value={title:"Error",content:`Error when deleting Album: ${t}`,type:"danger"}}},L=e=>{d.value=e};return(0,a.sV)((async()=>{await m()})),{heading:e,subheading:t,icon:l,isUpdateMode:n,showModal:o,onSubmit:u,talentOptions:r,selectedTalents:d,notification:s,currentAlbum:i,albumTable:c,toggleModal:g,createAlbum:b,getTalentsData:m,handleSubmit:p,handleUpdateClick:h,handleDeleteClick:f,handleselectedTalentsChange:L}}});const Q=(0,F.A)(B,[["render",c]]);var j=Q}}]);