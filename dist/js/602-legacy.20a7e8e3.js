"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[602],{46:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(9726);const a={class:"notification-heading"},o={class:"notification-title"},i={class:"notification-content"};function s(e,t,r,s,l,c){return null!==r.notification?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,n.C4)(["notification",`alert-${r.notification.type}`])},[(0,n.Lk)("div",a,[(0,n.Lk)("div",o,(0,n.v_)(r.notification.title),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>c.closeNotification&&c.closeNotification(...e)),class:"close"},t[1]||(t[1]=[(0,n.Lk)("span",null,"Ã—",-1)]))]),(0,n.Lk)("div",i,(0,n.v_)(r.notification.content),1)],2)):(0,n.Q3)("",!0)}var l={name:"NotificationComponent",props:{notification:{type:Object,require:!1}},data(){return{}},methods:{closeNotification(){this.$emit("update:notification",null)}},watch:{notification(e){e&&setTimeout((()=>{this.closeNotification()}),2e3)}}},c=r(6262);const u=(0,c.A)(l,[["render",s],["__scopeId","data-v-4f5179dc"]]);var d=u},2611:function(e,t,r){r.r(t),r.d(t,{default:function(){return Te}});var n={};r.r(n),r.d(n,{countAgencyRecord:function(){return re},createAgency:function(){return Z},deleteAgency:function(){return te},getAgencies:function(){return W},getAgencyById:function(){return Y},updateAgency:function(){return ee}});var a={};r.r(a),r.d(a,{countAlbumRecord:function(){return le},createAlbum:function(){return oe},deleteAlbum:function(){return se},getAlbumById:function(){return ae},getAlbums:function(){return ne},updateAlbum:function(){return ie}});var o={};r.r(o),r.d(o,{countDiscographyRecord:function(){return he},createDiscography:function(){return de},deleteDiscography:function(){return me},getDiscographies:function(){return ce},getDiscographyById:function(){return ue},updateDiscography:function(){return ge}});var i={};r.r(i),r.d(i,{countTalentRecord:function(){return ke},createTalent:function(){return pe},deleteTalent:function(){return be},getTalentById:function(){return ye},getTalents:function(){return fe},updateTalent:function(){return we}});var s=r(9726);const l={class:""},c={class:"form-row"},u={class:"col-md-6"},d={class:"position-relative form-group"},g={class:"col-md-6"},m={class:"position-relative form-group"},h={class:"form-row"},f={class:"col-md-6"},y={class:"position-relative form-group"},p={class:"col-md-6"},w={class:"position-relative form-group"},b={class:"form-row"},k={class:"col-md-6"},v={class:"position-relative form-group"},_=["value"],L={class:"col-md-6"},T={class:"position-relative form-group"},P={class:"form-row"},D={class:"col-md-6"},E={class:"position-relative form-group"},N={class:"col-md-6"},C={key:0,class:"position-relative form-group"},A={class:"form-row"},I={class:"col-md-6"},S={class:"position-relative form-group"},$={class:"col-md-6"},x={class:"position-relative form-group"};function j(e,t,r,n,a,o){const i=(0,s.g2)("button-spinner"),j=(0,s.g2)("modal-component"),q=(0,s.g2)("page-title-component"),M=(0,s.g2)("notification-component"),B=(0,s.g2)("table-component"),O=(0,s.g2)("pagination-component");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(q,{heading:a.heading,subheading:a.subheading,icon:a.icon},{actions:(0,s.k6)((()=>[(0,s.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>o.openModal&&o.openModal(...e)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Add New Talent "),(0,s.bF)(j,{title:"Add New Talent",isOpen:a.showModal,onCloseModal:o.closeModal},{body:(0,s.k6)((()=>[(0,s.Lk)("form",l,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("div",d,[t[11]||(t[11]=(0,s.Lk)("label",{for:"name"},"Name",-1)),(0,s.bo)((0,s.Lk)("input",{name:"name",id:"name",placeholder:"Name",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.newTalent.name=e),class:"form-control"},null,512),[[s.Jo,a.newTalent.name]])])]),(0,s.Lk)("div",g,[(0,s.Lk)("div",m,[t[12]||(t[12]=(0,s.Lk)("label",{for:"original_name"},"Original Name",-1)),(0,s.bo)((0,s.Lk)("input",{name:"original_name",id:"original_name",placeholder:"Original Name","onUpdate:modelValue":t[2]||(t[2]=e=>a.newTalent.original_name=e),type:"text",class:"form-control"},null,512),[[s.Jo,a.newTalent.original_name]])])])]),(0,s.Lk)("div",h,[(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[t[14]||(t[14]=(0,s.Lk)("label",{for:"name"},"Gender",-1)),(0,s.bo)((0,s.Lk)("select",{name:"gender",id:"gender","onUpdate:modelValue":t[3]||(t[3]=e=>a.newTalent.gender=e),class:"form-control"},t[13]||(t[13]=[(0,s.Lk)("option",{value:"male"},"Male",-1),(0,s.Lk)("option",{value:"female"},"female",-1)]),512),[[s.u1,a.newTalent.gender]])])]),(0,s.Lk)("div",p,[(0,s.Lk)("div",w,[t[15]||(t[15]=(0,s.Lk)("label",{for:"date_of_birth"},"Date Of Birth",-1)),(0,s.bo)((0,s.Lk)("input",{name:"date_of_birth",id:"date_of_birth",placeholder:"Date Of Birth","onUpdate:modelValue":t[4]||(t[4]=e=>a.newTalent.date_of_birth=e),type:"date",class:"form-control"},null,512),[[s.Jo,a.newTalent.date_of_birth]])])])]),(0,s.Lk)("div",b,[(0,s.Lk)("div",k,[(0,s.Lk)("div",v,[t[16]||(t[16]=(0,s.Lk)("label",{for:"agency"},"Agency",-1)),(0,s.bo)((0,s.Lk)("select",{name:"select",id:"agency","onUpdate:modelValue":t[5]||(t[5]=e=>a.newTalent.agency_id=e),class:"form-control",required:""},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.agencies,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.agency_id,value:e.agency_id},(0,s.v_)(e.agency_name),9,_)))),128))],512),[[s.u1,a.newTalent.agency_id]])])]),(0,s.Lk)("div",L,[(0,s.Lk)("div",T,[t[18]||(t[18]=(0,s.Lk)("label",{for:"talent_status"},"Talent Status",-1)),(0,s.bo)((0,s.Lk)("select",{name:"talent_status",id:"talent_status","onUpdate:modelValue":t[6]||(t[6]=e=>a.newTalent.talent_status=e),class:"form-control"},t[17]||(t[17]=[(0,s.Lk)("option",{value:"active"},"Active",-1),(0,s.Lk)("option",{value:"graduation"},"Graduation",-1),(0,s.Lk)("option",{value:"terminated"},"Terminated",-1)]),512),[[s.u1,a.newTalent.talent_status]])])])]),(0,s.Lk)("div",P,[(0,s.Lk)("div",D,[(0,s.Lk)("div",E,[t[19]||(t[19]=(0,s.Lk)("label",{for:"debut_date"},"Debut Date",-1)),(0,s.bo)((0,s.Lk)("input",{name:"debut_date",id:"debut_date",placeholder:"Debut Date",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>a.newTalent.debut_date=e),class:"form-control"},null,512),[[s.Jo,a.newTalent.debut_date]])])]),(0,s.Lk)("div",N,[o.showRetirementDate()?((0,s.uX)(),(0,s.CE)("div",C,[t[20]||(t[20]=(0,s.Lk)("label",{for:"retirement_date"},"Retirement Date",-1)),(0,s.bo)((0,s.Lk)("input",{name:"retirement_date",id:"retirement_date",placeholder:"Retirement Date",type:"date","onUpdate:modelValue":t[8]||(t[8]=e=>a.newTalent.retirement_date=e),class:"form-control"},null,512),[[s.Jo,a.newTalent.retirement_date]])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",A,[(0,s.Lk)("div",I,[(0,s.Lk)("div",S,[t[21]||(t[21]=(0,s.Lk)("label",{for:"height"},"Height",-1)),(0,s.bo)((0,s.Lk)("input",{name:"height",id:"height",placeholder:"Height",type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>a.newTalent.height=e),class:"form-control"},null,512),[[s.Jo,a.newTalent.height]])])]),(0,s.Lk)("div",$,[(0,s.Lk)("div",x,[t[22]||(t[22]=(0,s.Lk)("label",{for:"emoji"},"Emoji",-1)),(0,s.bo)((0,s.Lk)("input",{name:"emoji",id:"emoji",placeholder:"Emoji","onUpdate:modelValue":t[10]||(t[10]=e=>a.newTalent.emoji=e),type:"text",class:"form-control"},null,512),[[s.Jo,a.newTalent.emoji]])])])])])])),footer:(0,s.k6)((()=>[(0,s.bF)(i,{isLoading:a.onSubmit,buttonClass:"btn btn-primary",onClick:o.submitTalent,normalText:"Submit"},null,8,["isLoading","onClick"])])),_:1},8,["isOpen","onCloseModal"])])),_:1},8,["heading","subheading","icon"]),(0,s.bF)(M,{notification:a.showNotification},null,8,["notification"]),(0,s.bF)(B,{footer:!0,fields:a.fields,items:a.items,onChangeOrder:o.handleChangeOrder,onDeleteRow:o.deleteTalent},null,8,["fields","items","onChangeOrder","onDeleteRow"]),(0,s.bF)(O,{currentPage:a.currentPage,perPage:a.itemsPerPage,totalItems:a.totalItems,totalPages:a.totalPages,onLoadPage:o.loadPage,onChangePageSize:o.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])])}var q=r(3538),M=r(3304),B=r(6025),O=r(2874);const R=["disabled"],U={key:0,class:"spinner-icon"},V={key:1},X={key:2};function F(e,t,r,n,a,o){return(0,s.uX)(),(0,s.CE)("button",{disabled:r.isLoading,onClick:t[0]||(t[0]=(...e)=>o.handleClick&&o.handleClick(...e)),class:(0,s.C4)([r.buttonClass,"btn btn-spinner"])},[r.isLoading?((0,s.uX)(),(0,s.CE)("span",U)):(0,s.Q3)("",!0),r.isLoading?((0,s.uX)(),(0,s.CE)("span",X,(0,s.v_)(r.loadingText),1)):((0,s.uX)(),(0,s.CE)("span",V,(0,s.v_)(r.normalText),1))],10,R)}var J={props:{buttonClass:{type:String,default:"btn-success"},normalText:{type:String,default:"Submit"},loadingText:{type:String,default:"Submitting..."},isLoading:{type:Boolean,default:!1}},methods:{handleClick(){this.$emit("click")}}},z=r(6262);const Q=(0,z.A)(J,[["render",F],["__scopeId","data-v-d507b93e"]]);var G=Q,H=r(46),K=r(9137);const W=async()=>{try{const{data:e,error:t}=await K.N.from("agency").select("*");if(t)throw t;return e}catch(e){return console.error("Error fetching agencies:",e),{error:e.message}}},Y=async e=>{try{const{data:t,error:r}=await K.N.from("agency").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){return console.error(`Error fetching agency with ID ${e}:`,t),{error:t.message}}},Z=async e=>{try{const{data:t,error:r}=await K.N.from("agency").insert(e).single();if(r)throw r;return t}catch(t){return console.error("Error creating agency:",t),{error:t.message}}},ee=async(e,t)=>{try{const{data:r,error:n}=await K.N.from("agency").update(t).eq("id",e).single();if(n)throw n;return r}catch(r){return console.error(`Error updating agency with ID ${e}:`,r),{error:r.message}}},te=async e=>{try{const{data:t,error:r}=await K.N.from("agency").delete().eq("id",e);if(r)throw r;return t}catch(t){return console.error(`Error deleting agency with ID ${e}:`,t),{error:t.message}}},re=async()=>{try{const{count:e,error:t}=await K.N.from("agency").select("*",{count:"exact",head:!0});if(t)throw t;return e}catch(e){return console.error("Error counting agencies:",e),{error:e.message}}},ne=async()=>{try{const{data:e,error:t}=await K.N.from("album").select("*");if(t)throw t;return e}catch(e){return console.error("Error fetching albums:",e),{error:e.message}}},ae=async e=>{try{const{data:t,error:r}=await K.N.from("album").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){return console.error(`Error fetching album with ID ${e}:`,t),{error:t.message}}},oe=async e=>{try{const{data:t,error:r}=await K.N.from("album").insert(e).single();if(r)throw r;return t}catch(t){return console.error("Error creating album:",t),{error:t.message}}},ie=async(e,t)=>{try{const{data:r,error:n}=await K.N.from("album").update(t).eq("id",e).single();if(n)throw n;return r}catch(r){return console.error(`Error updating album with ID ${e}:`,r),{error:r.message}}},se=async e=>{try{const{data:t,error:r}=await K.N.from("album").delete().eq("id",e);if(r)throw r;return t}catch(t){return console.error(`Error deleting album with ID ${e}:`,t),{error:t.message}}},le=async()=>{try{const{count:e,error:t}=await K.N.from("album").select("*",{count:"exact",head:!0});if(t)throw t;return e}catch(e){return console.error("Error counting albums:",e),{error:e.message}}},ce=async()=>{try{const{data:e,error:t}=await K.N.from("discography").select("*");if(t)throw t;return e}catch(e){return console.error("Error fetching discographies:",e),{error:e.message}}},ue=async e=>{try{const{data:t,error:r}=await K.N.from("discography").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){return console.error(`Error fetching discography with ID ${e}:`,t),{error:t.message}}},de=async e=>{try{const{data:t,error:r}=await K.N.from("discography").insert(e).single();if(r)throw r;return t}catch(t){return console.error("Error creating discography:",t),{error:t.message}}},ge=async(e,t)=>{try{const{data:r,error:n}=await K.N.from("discography").update(t).eq("id",e).single();if(n)throw n;return r}catch(r){return console.error(`Error updating discography with ID ${e}:`,r),{error:r.message}}},me=async e=>{try{const{data:t,error:r}=await K.N.from("discography").delete().eq("id",e);if(r)throw r;return t}catch(t){return console.error(`Error deleting discography with ID ${e}:`,t),{error:t.message}}},he=async()=>{try{const{count:e,error:t}=await K.N.from("discography").select("*",{count:"exact",head:!0});if(t)throw t;return e}catch(e){return console.error("Error counting discographies:",e),{error:e.message}}},fe=async(e,t,r,n)=>{try{const a=(e-1)*t,o=a+t-1,{data:i,count:s,error:l}=await K.N.from("talent").select("*, agency(agency_name)",{count:"exact"}).order(r,{ascending:"asc"===n}).range(a,o);if(l)throw l;const c=i.map((e=>({...e,agency:e.agency?.agency_name})));return{items:c,totalItems:s,totalPages:Math.ceil(s/t)}}catch(a){return console.error("Error fetching talents:",a),{error:a.message}}},ye=async e=>{try{const{data:t,error:r}=await K.N.from("talent").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){return console.error(`Error fetching talent with ID ${e}:`,t),{error:t.message}}},pe=async e=>{try{const{data:t,error:r}=await K.N.from("talent").insert(e).single();if(r)throw r;return t}catch(t){return console.error("Error creating talent:",t),{error:t.message}}},we=async(e,t)=>{try{const{data:r,error:n}=await K.N.from("talent").update(t).eq("id",e).single();if(n)throw n;return r}catch(r){return console.error(`Error updating talent with ID ${e}:`,r),{error:r.message}}},be=async e=>{try{const{data:t,error:r}=await K.N.from("talent").delete().eq("id",e);if(r)throw r;return t}catch(t){return console.error(`Error deleting talent with ID ${e}:`,t),{error:t.message}}},ke=async()=>{try{const{count:e,error:t}=await K.N.from("talent").select("*",{count:"exact",head:!0});if(t)throw t;return e}catch(e){return console.error("Error counting talents:",e),{error:e.message}}},ve={...n,...a,...o,...i};var _e={name:"TalentsPage",components:{ModalComponent:q.A,PageTitleComponent:B.A,TableComponent:M.A,PaginationComponent:O.A,ButtonSpinner:G,NotificationComponent:H.A},data(){return{heading:"Talents",subheading:"Explore the Profiles of Emerging and Established Talents.",icon:"pe-7s-phone icon-gradient bg-premium-dark",showModal:!1,currentPage:1,itemsPerPage:100,totalItems:0,totalPages:0,orderBy:"id",orderDirection:"asc",onSubmit:!1,showNotification:null,newTalent:{name:null,original_name:null,gender:null,date_of_birth:null,agency_id:null,talent_status:"active",debut_date:null,retirement_date:null,height:null,emoji:null},fields:[{key:"id",value:"Id"},{key:"name",value:"Name"},{key:"original_name",value:"Original Name"},{key:"agency",value:"Agency"},{key:"talent_status",value:"Status"},{key:"debut_date",value:"Debut Date"}],items:[],agencies:[]}},created(){this.getTalentsData(this.currentPage,this.itemsPerPage),this.getAgencyData()},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},showRetirementDate(){return"terminated"===this.newTalent.talent_status||"graduation"===this.newTalent.talent_status},async getAgencyData(){try{const e=await ve.getAgencies();this.agencies=e}catch(e){console.error("Error fetching agency data:",e)}},async getTalentsData(e,t){const r=await ve.getTalents(e,t,this.orderBy,this.orderDirection);r.error?console.error("Error:",r.error):(this.items=r.items,this.totalItems=r.totalItems,this.totalPages=r.totalPages,this.itemsPerPage=t)},async submitTalent(){this.onSubmit=!0,ve.createTalent(this.newTalent).then((()=>{this.newTalent={name:null,original_name:null,gender:null,date_of_birth:null,agency_id:null,talent_status:"active",debut_date:null,retirement_date:null,height:null,emoji:null},this.showNotification={title:"Success",content:"Talent created successfully!",type:"success"},this.getTalentsData(this.currentPage,this.itemsPerPage),this.onSubmit=!1})).catch((e=>{this.showNotification={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}))},async deleteTalent(e){console.log(e);const t=confirm("Are you sure you want to delete this talent?");t&&await ve.deleteTalent(e).then((async()=>{this.showNotification={title:"Success",content:"Talent deleted successfully!",type:"success"},await this.getTalentsData(1,this.itemsPerPage)})).catch((e=>{this.showNotification={title:"Error",content:`Error when deleting talent: ${e}`,type:"danger"}}))},async handleChangeOrder({orderDirection:e,orderBy:t}){this.orderDirection=e,this.orderBy=t,await this.getTalentsData(this.currentPage,this.itemsPerPage)},async loadPage(e){this.currentPage=e,await this.getTalentsData(this.currentPage,this.itemsPerPage)},async changePageSize(e){this.itemsPerPage=e,await this.getTalentsData(1,this.itemsPerPage)}}};const Le=(0,z.A)(_e,[["render",j]]);var Te=Le}}]);