"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[774],{309:function(e,l,a){a.d(l,{A:function(){return p}});var t=a(9726);const n={class:"tag-container"},o={class:"tags"},u={key:0},s=["onClick"],i=["value"];function r(e,l,a,r,c,d){return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",o,[0===e.selected.length?((0,t.uX)(),(0,t.CE)("div",u,"No selected value.")):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.selected,(l=>((0,t.uX)(),(0,t.CE)("span",{key:l.id,class:"tag"},[(0,t.eW)((0,t.v_)(l.name)+" ",1),(0,t.Lk)("button",{class:"remove-tag",onClick:a=>e.removeItem(l)},"x",8,s)])))),128))]),(0,t.bo)((0,t.Lk)("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":l[0]||(l[0]=l=>e.searchQuery=l),onInput:l[1]||(l[1]=(...l)=>e.onSearch&&e.onSearch(...l)),class:"form-control search-input"},null,544),[[t.Jo,e.searchQuery]]),e.showOptions?((0,t.uX)(),(0,t.CE)("select",{key:0,onChange:l[2]||(l[2]=(...l)=>e.updateSelectedItems&&e.updateSelectedItems(...l)),multiple:"",class:"form-control"},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.filteredItems,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,t.v_)(e.name),9,i)))),128))],32)):(0,t.Q3)("",!0)])}var c=(0,t.pM)({name:"TagSelector",props:{items:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:l}){const a=(0,t.KR)([...e.modelValue]),n=(0,t.KR)(""),o=(0,t.KR)(!1),u=(0,t.EW)((()=>e.items.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),s=e=>a.value.some((l=>l.id===e.id)),i=e=>{a.value=a.value.filter((l=>l.id!==e.id)),l("update:modelValue",a.value)},r=()=>{o.value=""!==n.value.trim()&&u.value.length>0},c=t=>{const n=Array.from(t.target.selectedOptions);n.forEach((l=>{const t=l.value,n=e.items.find((e=>e.id===t));n&&(s(n)?a.value=a.value.filter((e=>e.id!==n.id)):a.value.push(n))})),l("update:modelValue",a.value)};return(0,t.wB)((()=>e.modelValue),(e=>{a.value=[...e]}),{immediate:!0}),{selected:a,searchQuery:n,filteredItems:u,showOptions:o,onSearch:r,removeItem:i,updateSelectedItems:c,isSelected:s}}}),d=a(6262);const m=(0,d.A)(c,[["render",r],["__scopeId","data-v-286852e2"]]);var p=m},1963:function(e,l,a){a.r(l),a.d(l,{default:function(){return j}});var t=a(9726);const n={class:"position-relative form-group"},o={class:"position-relative form-group"},u={class:"position-relative form-group"},s={class:"position-relative form-group"},i={class:"position-relative form-group"};function r(e,l,a,r,c,d){const m=(0,t.g2)("PageTitleComponent"),p=(0,t.g2)("notification-component"),b=(0,t.g2)("TagSelectorComponent"),k=(0,t.g2)("button-spinner"),v=(0,t.g2)("ModalComponent"),g=(0,t.g2)("AlbumTable");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(m,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,t.k6)((()=>[(0,t.Lk)("button",{type:"button",onClick:l[0]||(l[0]=(...l)=>e.toggleModal&&e.toggleModal(...l)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,t.bF)(p,{notification:e.notification,"onUpdate:notification":l[1]||(l[1]=l=>e.notification=l)},null,8,["notification"]),(0,t.bF)(v,{title:e.isUpdateMode?"Update Album":"Add New Album",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,t.k6)((()=>[(0,t.Lk)("div",n,[l[7]||(l[7]=(0,t.Lk)("label",{for:"name"},"Album Name",-1)),(0,t.bo)((0,t.Lk)("input",{name:"album_name",placeholder:"Album Name","onUpdate:modelValue":l[2]||(l[2]=l=>e.currentAlbum.name=l),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentAlbum.name]])]),(0,t.Lk)("div",o,[l[9]||(l[9]=(0,t.Lk)("label",{for:"album_type"},"Album Type",-1)),(0,t.bo)((0,t.Lk)("select",{id:"album_type","onUpdate:modelValue":l[3]||(l[3]=l=>e.currentAlbum.album_type=l),class:"form-control"},l[8]||(l[8]=[(0,t.Lk)("option",{value:"single"},"Single",-1),(0,t.Lk)("option",{value:"extended_play"},"Extended Play",-1),(0,t.Lk)("option",{value:"album"},"Album",-1)]),512),[[t.u1,e.currentAlbum.album_type]])]),(0,t.Lk)("div",u,[l[10]||(l[10]=(0,t.Lk)("label",{for:"ensemble_as"},"Ensemble As",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",name:"ensemble_as",placeholder:"Ensemble As","onUpdate:modelValue":l[4]||(l[4]=l=>e.currentAlbum.ensemble_as=l),class:"form-control"},null,512),[[t.Jo,e.currentAlbum.ensemble_as]])]),(0,t.Lk)("div",s,[l[11]||(l[11]=(0,t.Lk)("label",{for:"name"},"Release Date",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date",name:"release_date",placeholder:"Album Release Date","onUpdate:modelValue":l[5]||(l[5]=l=>e.currentAlbum.released_date=l),class:"form-control"},null,512),[[t.Jo,e.currentAlbum.released_date]])]),(0,t.Lk)("div",i,[l[12]||(l[12]=(0,t.Lk)("label",{for:"talent"},"Talent",-1)),(0,t.bF)(b,{items:e.talentOptions,"model-value":e.selectedTalents,"onUpdate:modelValue":e.handleselectedTalentsChange},null,8,["items","model-value","onUpdate:modelValue"])])])),footer:(0,t.k6)((()=>[(0,t.Lk)("button",{class:"btn btn-primary",onClick:l[6]||(l[6]=(...l)=>e.toggleModal&&e.toggleModal(...l))},"Cancel"),(0,t.bF)(k,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Album":"Add New Album"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,t.bF)(g,{ref:"albumTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var c=a(1313),d=a(8277),m=a(1721),p=a(6423),b=a(309);const k={class:"form-inline"},v={class:"input-group mb-2"},g={class:"table table-hover table-sm table-bordered"},y=["id","onClick"],h={key:0},L={key:1},C={key:2},A=["href"],f=["onClick"],_=["onClick"],K=["onClick"],E={key:0,class:"details-row"},P={colspan:"6"},w={key:1},S=["colspan"],R=["id","onClick"],D={key:0},T={key:1},X={key:2};function U(e,l,a,n,o,u){const s=(0,t.g2)("pagination-component");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",k,[(0,t.Lk)("div",v,[(0,t.bo)((0,t.Lk)("input",{placeholder:"Searching...",onInput:l[0]||(l[0]=(...l)=>e.onSearch&&e.onSearch(...l)),"onUpdate:modelValue":l[1]||(l[1]=l=>e.search=l),type:"text",class:"form-control",name:"search"},null,544),[[t.Jo,e.search]]),l[2]||(l[2]=(0,t.Lk)("div",{class:"input-group-append"},[(0,t.Lk)("button",{class:"btn btn-primary"},[(0,t.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,t.Lk)("table",g,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[l[3]||(l[3]=(0,t.Lk)("th",null,[(0,t.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.fields,(l=>((0,t.uX)(),(0,t.CE)("th",{key:l.key,id:l.key,onClick:a=>e.changeOrder(l.key)},[(0,t.eW)((0,t.v_)(l.value)+" ",1),e.orderBy===l.key&&"asc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",h,"▼")):e.orderBy===l.key&&"desc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",L,"▲")):((0,t.uX)(),(0,t.CE)("span",C,"◆"))],8,y)))),128)),l[4]||(l[4]=(0,t.Lk)("th",null,"Action",-1))])]),(0,t.Lk)("tbody",null,[e.items.length>0?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)(e.items,((a,n)=>((0,t.uX)(),(0,t.CE)(t.FK,{key:n},[(0,t.Lk)("tr",null,[l[7]||(l[7]=(0,t.Lk)("td",null,[(0,t.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,t.Lk)("td",null,(0,t.v_)(a.id),1),(0,t.Lk)("td",null,[(0,t.Lk)("a",{href:`album/${a.id}`},(0,t.v_)(a.name),9,A)]),(0,t.Lk)("td",null,(0,t.v_)(a.album_type),1),(0,t.Lk)("td",null,(0,t.v_)(a.discography_count),1),(0,t.Lk)("td",null,(0,t.v_)(a.released_date),1),(0,t.Lk)("td",null,[(0,t.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:l=>e.handleUpdate(a)},l[5]||(l[5]=[(0,t.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,f),(0,t.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:l=>e.handleDelete(a.id)},l[6]||(l[6]=[(0,t.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,_),(0,t.Lk)("button",{type:"button",onClick:l=>e.toggleDetails(n),class:"btn btn-sm btn-info"},[(0,t.Lk)("i",{class:(0,t.C4)(["pe-7s-angle-right",e.expandedRows[n]?"rotate-icon":""])},null,2)],8,K)])]),e.expandedRows[n]?((0,t.uX)(),(0,t.CE)("tr",E,[(0,t.Lk)("td",P,[(0,t.Lk)("div",null,[l[8]||(l[8]=(0,t.Lk)("p",null,"Talens: ",-1)),(0,t.Lk)("p",null,(0,t.v_)(a.talents),1)]),(0,t.Lk)("div",null,[l[9]||(l[9]=(0,t.Lk)("p",null,"Album Description: ",-1)),(0,t.Lk)("p",null,(0,t.v_)(a.album_description),1)])])])):(0,t.Q3)("",!0)],64)))),128)):((0,t.uX)(),(0,t.CE)("tr",w,[(0,t.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,S)]))]),(0,t.Lk)("tfoot",null,[(0,t.Lk)("tr",null,[l[10]||(l[10]=(0,t.Lk)("th",null,[(0,t.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.fields,(l=>((0,t.uX)(),(0,t.CE)("th",{key:l.key,id:l.key,onClick:a=>e.changeOrder(l.key)},[(0,t.eW)((0,t.v_)(l.value)+" ",1),e.orderBy===l.key&&"asc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",D,"▼")):e.orderBy===l.key&&"desc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",T,"▲")):((0,t.uX)(),(0,t.CE)("span",X,"◆"))],8,R)))),128)),l[11]||(l[11]=(0,t.Lk)("th",null,"Action",-1))])])]),(0,t.bF)(s,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var I=a(9794),x=a(9274),M=a(1515),V=(0,t.pM)({name:"AlbumTable",components:{ModalComponent:c.A,TableComponent:I.A,PaginationComponent:x.A,NotificationComponent:m.A,ButtonSpinner:p.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:l}){const a=(0,t.KR)("released_date"),n=(0,t.KR)("desc"),o=(0,t.KR)(1),u=(0,t.KR)(20),s=(0,t.KR)(0),i=(0,t.KR)(0),r=(0,t.KR)(""),c=(0,t.KR)([]),d=[{key:"id",value:"ID"},{key:"name",value:"Album Name"},{key:"album_type",value:"Album Type"},{key:"discography_count",value:"Discography"},{key:"released_date",value:"Released Date"}],m=(0,t.KR)([]),p=async()=>{r.value&&(o.value=1);const e=await M.K.getAlbumsWithPaging(o.value,u.value,a.value,n.value,r.value);e.error||(m.value=e.items,s.value=e.totalItems,i.value=e.totalPages,u.value=u.value)},b=e=>{l("handleUpdate",e)},k=async e=>{const a=confirm(`Are you sure you want to delete Album ${e}?`);a&&l("handleDelete",e)},v=e=>{o.value=e,p()},g=()=>{o.value=1,p()},y=e=>{e===a.value?"asc"===n.value?n.value="desc":"desc"===n.value?n.value="":n.value="asc":(a.value=e,n.value="asc"),p()},h=async e=>{u.value=e,o.value=1,await p()},L=e=>{c.value[e]=!c.value[e]};return(0,t.sV)((()=>{p()})),{currentPage:o,itemsPerPage:u,totalItems:s,totalPages:i,fields:d,items:m,search:r,orderBy:a,orderDirection:n,expandedRows:c,loadPage:v,changePageSize:h,onSearch:g,changeOrder:y,handleDelete:k,handleUpdate:b,getAlbumsData:p,toggleDetails:L}}}),F=a(6262);const O=(0,F.A)(V,[["render",U]]);var N=O,B=(0,t.pM)({name:"AlbumsPage",components:{ModalComponent:c.A,PageTitleComponent:d.A,NotificationComponent:m.A,ButtonSpinner:p.A,TagSelectorComponent:b.A,AlbumTable:N},setup(){const e=(0,t.KR)("Albums"),l=(0,t.KR)("Albums Pages"),a=(0,t.KR)("pe-7s-album icon-gradient bg-tempting-azure"),n=(0,t.KR)(!1),o=(0,t.KR)(!1),u=(0,t.KR)(!1),s=(0,t.KR)(null),i=(0,t.Kh)({name:null,album_type:null,ensemble_as:null,released_date:null}),r=(0,t.KR)(null),c=(0,t.KR)([]),d=(0,t.KR)([]),m=async()=>{const e=await M.K.getTalents();c.value=e},p=async()=>{u.value=!0,n.value?k():b()},b=async()=>{try{await M.K.createAlbum(i,d.value),v(),g(),y(),u.value=!1,s.value={title:"Success",content:"Album created successfully!",type:"success"},y()}catch(e){u.value=!1,s.value={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}},k=async()=>{try{await M.K.updateAlbum(i,d.value),v(),g(),y(),u.value=!1,s.value={title:"Success",content:"Album updated successfully!",type:"success"},y(),n.value=!1}catch(e){u.value=!1,s.value={title:"Error",content:`Error when updating Album: ${e}`,type:"danger"},n.value=!1}},v=()=>{Object.assign(i,{name:null,album_type:null,ensemble_as:null,released_date:null}),i.id&&delete i.id,d.value=[]},g=()=>{n.value=!1,v(),o.value=!o.value},y=()=>{r.value&&r.value.getAlbumsData()},h=e=>{n.value=!0,e&&(i.id=e.id,i.name=e.name,i.album_type=e.album_type,i.ensemble_as=e.ensemble_as,i.released_date=e.released_date,d.value=e.album_talent.map((e=>({id:e.talent.id,name:e.talent.name})))),o.value=!0},L=async e=>{try{await M.K.deleteAlbum(e),s.value={title:"Success",content:"Album deleted successfully!",type:"success"},y()}catch(l){s.value={title:"Error",content:`Error when deleting Album: ${l}`,type:"danger"}}},C=e=>{d.value=e};return(0,t.sV)((async()=>{await m()})),{heading:e,subheading:l,icon:a,isUpdateMode:n,showModal:o,onSubmit:u,talentOptions:c,selectedTalents:d,notification:s,currentAlbum:i,albumTable:r,toggleModal:g,createAlbum:b,getTalentsData:m,handleSubmit:p,handleUpdateClick:h,handleDeleteClick:L,handleselectedTalentsChange:C}}});const Q=(0,F.A)(B,[["render",r]]);var j=Q}}]);