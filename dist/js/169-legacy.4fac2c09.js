"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[169],{9516:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var o=t(9726);function n(e,a,t,n,i,s){const l=(0,o.g2)("modal-component"),r=(0,o.g2)("page-title-component"),g=(0,o.g2)("table-component"),d=(0,o.g2)("pagination-component");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(r,{heading:i.heading,subheading:i.subheading,icon:i.icon},{actions:(0,o.k6)((()=>[(0,o.Lk)("button",{type:"button",onClick:a[0]||(a[0]=(...e)=>s.openModal&&s.openModal(...e)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New "),(0,o.bF)(l,{title:"Create New",isOpen:i.showModal,onCloseModal:s.closeModal},{body:(0,o.k6)((()=>a[3]||(a[3]=[(0,o.Lk)("p",null,"This is the content of the modal body.",-1)]))),footer:(0,o.k6)((()=>[(0,o.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>s.closeModal&&s.closeModal(...e))},"Cancel"),(0,o.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>s.closeModal&&s.closeModal(...e))},"Submit")])),_:1},8,["isOpen","onCloseModal"])])),_:1},8,["heading","subheading","icon"]),(0,o.bF)(g,{footer:!0,fields:i.fields,items:i.items},null,8,["fields","items"]),(0,o.bF)(d,{currentPage:i.currentPage,perPage:i.itemsPerPage,totalItems:i.totalItems,totalPages:i.totalPages,onLoadPage:s.loadPage,onChangePageSize:s.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])])}var i=t(3538),s=t(3304),l=t(6025),r=t(2874),g=t(9137),d={name:"DiscographiesPage",components:{ModalComponent:i.A,TableComponent:s.A,PageTitleComponent:l.A,PaginationComponent:r.A},data(){return{showModal:!1,heading:"Discographies",subheading:"Explore the Profiles of Emerging and Established Talents.",icon:"pe-7s-phone icon-gradient bg-premium-dark",currentPage:1,itemsPerPage:20,totalItems:0,totalPages:0,fields:[{key:"id",value:"id"},{key:"name",value:"name"},{key:"original_name",value:"original_name"},{key:"released_date",value:"Released Date"},{key:"album",value:"album"}],items:[]}},created(){this.getDiscographiesData(this.currentPage,this.itemsPerPage)},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},async getDiscographiesData(e,a){const t=(e-1)*a,o=t+a-1,{data:n,error:i}=await g.N.from("discography").select("*, album(name), talent(name)").range(t,o);if(!i){this.totalItems=n.length;const e=n.map((e=>({...e,album:e.album?.name,talent:e.talent?.name})));this.items=e}},async handleChangeOrder({orderDirection:e,orderBy:a}){this.orderDirection=e,this.orderBy=a,await this.getDiscographiesData(this.currentPage,this.itemsPerPage)},loadPage(e){this.currentPage=e,this.getDiscographiesData(this.currentPage,this.itemsPerPage)},async changePageSize(e){this.itemsPerPage=e,await this.getDiscographiesData(1,this.itemsPerPage)}}},c=t(6262);const h=(0,c.A)(d,[["render",n]]);var m=h}}]);