"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[544],{8121:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var o=a(9726);const r={class:"position-relative form-group"},l={key:0,class:"text-danger"},n={class:"position-relative form-group"},s={key:0,class:"text-danger"},c={class:"position-relative form-group"},u={class:"position-relative form-group"},i={key:0,class:"main-card mb-3 card"},d={class:"card-body"},g={class:"position-relative form-group"},p={class:"position-relative form-group"},m={key:1,class:"main-card mb-3 card"},v={class:"card-body"},h={class:"position-relative form-group"},x={class:"form-group"},f={class:"form-group"},b={class:"form-group"},y={class:"position-relative form-group"};function k(e,t,a,k,_,L){const w=(0,o.g2)("page-title-component"),C=(0,o.g2)("notification-component"),D=(0,o.g2)("button-spinner"),E=(0,o.g2)("modal-component"),K=(0,o.g2)("table-component"),M=(0,o.g2)("pagination-component");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(w,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,o.k6)((()=>[(0,o.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.toggleModal&&e.toggleModal(...t)),class:"btn btn-primary mr-2"}," Create New "),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.toggleImport&&e.toggleImport(...t)),type:"button",class:"btn btn-info mr-2"}," Import "),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.toggleExport&&e.toggleExport(...t)),type:"button",class:"btn btn-info mr-2"}," Export ")])),_:1},8,["heading","subheading","icon"]),(0,o.bF)(C,{notification:e.notification,"onUpdate:notification":t[3]||(t[3]=t=>e.notification=t)},null,8,["notification"]),(0,o.bF)(E,{title:e.isUpdateMode?"Update Dataset":"Add New Dataset",isOpen:e.showCreateModal,onCloseModal:e.toggleModal},{body:(0,o.k6)((()=>[(0,o.Lk)("div",r,[t[16]||(t[16]=(0,o.Lk)("label",{for:"source_text"},"Source Text",-1)),(0,o.bo)((0,o.Lk)("textarea",{rows:"5",name:"source_text",id:"source_text",placeholder:"Source Text","onUpdate:modelValue":t[4]||(t[4]=t=>e.currentDataset.source_text=t),type:"text",class:"form-control"},null,512),[[o.Jo,e.currentDataset.source_text]]),e.validationErrors.source_text?((0,o.uX)(),(0,o.CE)("small",l,(0,o.v_)(e.validationErrors.source_text),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",n,[t[17]||(t[17]=(0,o.Lk)("label",{for:"target_text"},"Target Text",-1)),(0,o.bo)((0,o.Lk)("textarea",{rows:"5",name:"target_text",id:"target_text",placeholder:"Source Text","onUpdate:modelValue":t[5]||(t[5]=t=>e.currentDataset.target_text=t),type:"text",class:"form-control"},null,512),[[o.Jo,e.currentDataset.target_text]]),e.validationErrors.target_text?((0,o.uX)(),(0,o.CE)("small",s,(0,o.v_)(e.validationErrors.target_text),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",c,[t[18]||(t[18]=(0,o.Lk)("label",{for:"source"},"Source",-1)),(0,o.bo)((0,o.Lk)("input",{name:"source",id:"source",placeholder:"source","onUpdate:modelValue":t[6]||(t[6]=t=>e.currentDataset.source=t),type:"text",class:"form-control"},null,512),[[o.Jo,e.currentDataset.source]])]),(0,o.Lk)("div",u,[t[19]||(t[19]=(0,o.Lk)("label",{for:"category"},"Category",-1)),(0,o.bo)((0,o.Lk)("input",{name:"category",id:"category",placeholder:"category","onUpdate:modelValue":t[7]||(t[7]=t=>e.currentDataset.category=t),type:"text",class:"form-control"},null,512),[[o.Jo,e.currentDataset.category]])])])),footer:(0,o.k6)((()=>[(0,o.Lk)("button",{type:"text",class:"btn btn-primary",onClick:t[8]||(t[8]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,o.bF)(D,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Dataset":"Add New Dataset"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),e.showImport?((0,o.uX)(),(0,o.CE)("div",i,[t[21]||(t[21]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h5",{class:"card-title"},"Import Data")],-1)),(0,o.Lk)("div",d,[(0,o.Lk)("div",g,[t[20]||(t[20]=(0,o.Lk)("label",{for:"fileInput",class:""},"File",-1)),(0,o.Lk)("input",{name:"file",id:"fileInput",type:"file",onChange:t[9]||(t[9]=(...t)=>e.handleFileChange&&e.handleFileChange(...t)),class:"form-control-file"},null,32)]),(0,o.Lk)("div",p,[(0,o.Lk)("button",{class:"btn-success btn",onClick:t[10]||(t[10]=(...t)=>e.handleImport&&e.handleImport(...t))},"Import")])])])):(0,o.Q3)("",!0),e.showExport?((0,o.uX)(),(0,o.CE)("div",m,[t[25]||(t[25]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h5",{class:"card-title"},"Export Data")],-1)),(0,o.Lk)("div",v,[(0,o.Lk)("div",h,[(0,o.Lk)("div",x,[t[22]||(t[22]=(0,o.Lk)("label",{for:"file_name",class:""},"File Name",-1)),(0,o.bo)((0,o.Lk)("input",{name:"file_name",id:"file_name","onUpdate:modelValue":t[11]||(t[11]=t=>e.fileName=t),placeholder:"File Name",type:"text",class:"form-control"},null,512),[[o.Jo,e.fileName]])]),(0,o.Lk)("div",f,[t[23]||(t[23]=(0,o.Lk)("label",{for:"source_text_max_length",class:""},"Source Text Max Length",-1)),(0,o.bo)((0,o.Lk)("input",{name:"source_text_max_length",id:"source_text_max_length","onUpdate:modelValue":t[12]||(t[12]=t=>e.sourceTextMaxLength=t),type:"number",placeholder:"Source Text Max Length",class:"form-control"},null,512),[[o.Jo,e.sourceTextMaxLength]])]),(0,o.Lk)("div",b,[t[24]||(t[24]=(0,o.Lk)("label",{for:"target_text_max_length",class:""},"Target Text Max Length",-1)),(0,o.bo)((0,o.Lk)("input",{name:"target_text_max_length",id:"target_text_max_length","onUpdate:modelValue":t[13]||(t[13]=t=>e.targetTextMaxLength=t),type:"number",placeholder:"Target Text Max Length",class:"form-control"},null,512),[[o.Jo,e.targetTextMaxLength]])])]),(0,o.Lk)("div",y,[(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[14]||(t[14]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[15]||(t[15]=(...t)=>e.handleExport&&e.handleExport(...t))},"Export")])])])):(0,o.Q3)("",!0),(0,o.bF)(K,{footer:!0,fields:e.fields,items:e.items,"custom-class":"datase-table",onSearch:e.onSearchChange,onChangeOrder:e.handleChangeOrder,onDeleteRow:e.handleDeleteDataset,onUpdateRow:e.handleUpdateRow},null,8,["fields","items","onSearch","onChangeOrder","onDeleteRow","onUpdateRow"]),(0,o.bF)(M,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])])}var _=a(9794),L=a(8277),w=a(9274),C=a(1721),D=a(1313),E=a(6423),K=a(1090),M=a(1515),P=(0,o.pM)({name:"DatasetPage",components:{PageTitleComponent:L.A,PaginationComponent:w.A,TableComponent:_.A,NotificationComponent:C.A,ModalComponent:D.A,ButtonSpinner:E.A},setup(){const e=(0,o.KR)("Chatbot Dataset"),t=(0,o.KR)("Chatbot Dataset Page for admin."),a=(0,o.KR)("pe-7s-server icon-gradient bg-tempting-azure"),r=(0,o.KR)(!1),l=(0,o.KR)(1),n=(0,o.KR)(10),s=(0,o.KR)(0),c=(0,o.KR)(0),u=(0,o.KR)("id"),i=(0,o.KR)("asc"),d=(0,o.KR)(null),g=(0,o.KR)(0),p=(0,o.KR)(0),m=(0,o.KR)(""),v=(0,o.KR)(null),h=(0,o.KR)(!1),x=(0,o.KR)(!1),f=(0,o.KR)(!1),b=(0,o.KR)(!1),y=(0,o.KR)({}),k=(0,o.Kh)({source_text:null,target_text:null,source:null,category:null,language:"en"}),_=[{key:"id",value:"Id"},{key:"source_text",value:"Source Text"},{key:"target_text",value:"Target Text"},{key:"category",value:"Category"}],L=(0,o.KR)([]),w=(0,o.KR)(null),C=async(e,t)=>{const a=await M.K.getDatasets(e,t,u.value,i.value,m.value),o=await M.K.getCountDataset(m.value);a.error||(L.value=a,s.value=o,c.value=Math.ceil(o/t),n.value=t)},D=e=>{m.value=e,C(1,n.value)},E=()=>{y.value=(0,K.h$)(k),0===Object.keys(y.value).length?b.value?R():P():r.value=!1},P=async()=>{try{await M.K.createDataset(k),V(),F(),w.value={title:"Success",content:"Dataset created successfully!",type:"success"},C(l.value,n.value),b.value=!1}catch(e){w.value={title:"Error",content:`Error when submitting dataset: ${e}`,type:"danger"},b.value=!1}},R=async()=>{try{await M.K.updateDataset(k),V(),F(),w.value={title:"Success",content:"Dataset updated successfully!",type:"success"},C(l.value,n.value),b.value=!1}catch(e){w.value={title:"Error",content:`Error when updating dataset: ${e}`,type:"danger"},b.value=!1}},S=async e=>{if(confirm(`Are you sure you want to delete dataset ${e}?`))try{await M.K.deleteDataset(e),w.value={title:"Success",content:"Dataset deleted successfully!",type:"success"},C(1,n.value)}catch(t){w.value={title:"Error",content:`Error when deleting dataset: ${t}`,type:"danger"}}},T=async()=>{try{var e=await M.K.exportDataset(d.value,g.value,p.value);e.success?(w.value={title:"Success",content:"Export Dataset successfully!",type:"success"},C(l.value,n.value)):w.value={title:"Error",content:`${e.message}`,type:"danger"},b.value=!1}catch(t){w.value={title:"Error",content:`Error when export dataset: ${t}`,type:"danger"}}},U=({orderDirection:e,orderBy:t})=>{i.value=e,u.value=t,C(l.value,n.value)},I=e=>{b.value=!0;const t=L.value.find((t=>t.id===e));t&&Object.assign(k,t),h.value=!0},F=()=>{b.value=!1,V(),h.value=!h.value,x.value=!1,f.value=!1},A=()=>{x.value=!x.value,f.value=!1},N=()=>{x.value=!1,f.value=!f.value},O=e=>{l.value=e,C(l.value,n.value)},$=e=>{n.value=e,C(1,n.value)},V=()=>{Object.assign(k,{source_text:null,target_text:null,source:null,category:null,language:"en"}),k.id&&delete k.id};return(0,o.sV)((()=>{C(l.value,n.value)})),{onSubmit:r,currentPage:l,itemsPerPage:n,totalItems:s,totalPages:c,orderBy:u,orderDirection:i,fileName:d,sourceTextMaxLength:g,targetTextMaxLength:p,search:m,selectedFile:v,showCreateModal:h,showImport:x,showExport:f,isUpdateMode:b,currentDataset:k,validationErrors:y,fields:_,items:L,heading:e,subheading:t,icon:a,notification:w,getDatasetData:C,onSearchChange:D,handleSubmit:E,createDataset:P,updateDataset:R,handleDeleteDataset:S,handleChangeOrder:U,handleUpdateRow:I,handleExport:T,toggleModal:F,toggleImport:A,toggleExport:N,loadPage:O,changePageSize:$,cleanCurrentDataset:V}}}),R=a(6262);const S=(0,R.A)(P,[["render",k]]);var T=S},1090:function(e,t,a){a.d(t,{GN:function(){return r},h$:function(){return l},y5:function(){return o}});const o=e=>{const t={};return e.agency_name&&0!==e.agency_name.trim().length||(t.agency_name="Agency Name is required."),t},r=e=>{const t={};return e.email&&0!==e.email.trim().length?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.email)||(t.email="Please enter a valid email format."):t.email="User email is required.",e.password&&0!==e.password.trim().length||(t.password="User password is required."),e.confirm_password&&0!==e.confirm_password.trim().length?e.password!==e.confirm_password&&(t.confirm_password="Password and confirm password must match."):t.confirm_password="User confirm password is required.",t},l=e=>{const t={};return e.source_text&&0!==e.source_text.trim().length||(t.source_text="Source text is required."),e.target_text&&0!==e.target_text.trim().length||(t.target_text="Target text is required."),t}}}]);