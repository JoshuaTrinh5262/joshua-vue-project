"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[729],{309:function(e,t,n){n.d(t,{A:function(){return p}});var l=n(9726);const a={class:"tag-container"},o={class:"tags"},s={key:0},u=["onClick"],r=["value"];function i(e,t,n,i,c,d){return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",o,[0===e.selected.length?((0,l.uX)(),(0,l.CE)("div",s,"No selected value.")):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.selected,(t=>((0,l.uX)(),(0,l.CE)("span",{key:t.id,class:"tag"},[(0,l.eW)((0,l.v_)(t.name)+" ",1),(0,l.Lk)("button",{class:"remove-tag",onClick:n=>e.removeItem(t)},"x",8,u)])))),128))]),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),onInput:t[1]||(t[1]=(...t)=>e.onSearch&&e.onSearch(...t)),class:"form-control search-input"},null,544),[[l.Jo,e.searchQuery]]),e.showOptions?((0,l.uX)(),(0,l.CE)("select",{key:0,onChange:t[2]||(t[2]=(...t)=>e.updateSelectedItems&&e.updateSelectedItems(...t)),multiple:"",class:"form-control"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filteredItems,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,r)))),128))],32)):(0,l.Q3)("",!0)])}var c=(0,l.pM)({name:"TagSelector",props:{items:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:t}){const n=(0,l.KR)([...e.modelValue]),a=(0,l.KR)(""),o=(0,l.KR)(!1),s=(0,l.EW)((()=>e.items.filter((e=>e.name.toLowerCase().includes(a.value.toLowerCase()))))),u=e=>n.value.some((t=>t.id===e.id)),r=e=>{n.value=n.value.filter((t=>t.id!==e.id)),t("update:modelValue",n.value)},i=()=>{o.value=""!==a.value.trim()&&s.value.length>0},c=l=>{const a=Array.from(l.target.selectedOptions);a.forEach((t=>{const l=t.value,a=e.items.find((e=>e.id===l));a&&(u(a)?n.value=n.value.filter((e=>e.id!==a.id)):n.value.push(a))})),t("update:modelValue",n.value)};return(0,l.wB)((()=>e.modelValue),(e=>{n.value=[...e]}),{immediate:!0}),{selected:n,searchQuery:a,filteredItems:s,showOptions:o,onSearch:i,removeItem:r,updateSelectedItems:c,isSelected:u}}}),d=n(6262);const v=(0,d.A)(c,[["render",i],["__scopeId","data-v-286852e2"]]);var p=v},2798:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var l=n(9726);const a={class:"position-relative form-group"},o={class:"position-relative form-group"},s={class:"position-relative form-group"},u={class:"form-row"},r={class:"col-md-6"},i={class:"position-relative form-group"},c={class:"col-md-6"},d={class:"position-relative form-group"},v={class:"form-row"},p={class:"col-md-6"},m={class:"position-relative form-group"},k={class:"col-md-6"},h={class:"position-relative form-group"},g={class:"position-relative form-group"},y={class:"position-relative form-group"};function _(e,t,n,_,b,L){const E=(0,l.g2)("PageTitleComponent"),f=(0,l.g2)("NotificationComponent"),C=(0,l.g2)("SetlistComponent"),S=(0,l.g2)("TagSelectorComponent"),U=(0,l.g2)("button-spinner"),K=(0,l.g2)("ModalComponent"),T=(0,l.g2)("EventTable");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(E,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,l.k6)((()=>[(0,l.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.toggleModal&&e.toggleModal(...t)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,l.bF)(f,{notification:e.notification,"onUpdate:notification":t[1]||(t[1]=t=>e.notification=t)},null,8,["notification"]),(0,l.bF)(K,{title:e.isUpdateMode?"Update Event":"Add New Event",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,l.k6)((()=>[(0,l.Lk)("div",a,[t[10]||(t[10]=(0,l.Lk)("label",{for:"event_title"},"Event Title",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_title",id:"event_title",placeholder:"Event Title",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.currentEvent.event_title=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_title]])]),(0,l.Lk)("div",o,[t[11]||(t[11]=(0,l.Lk)("label",{for:"event_summary"},"Event Summary",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_summary",id:"event_summary",placeholder:"Event Summary",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.currentEvent.event_summary=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_summary]])]),(0,l.Lk)("div",s,[t[12]||(t[12]=(0,l.Lk)("label",{for:"event_hashtag"},"Event Hashtag",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_hashtag",id:"event_hashtag",placeholder:"Event Hashtag",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.currentEvent.event_hashtag=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_hashtag]])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",r,[(0,l.Lk)("div",i,[t[13]||(t[13]=(0,l.Lk)("label",{for:"event_url"},"Event Url",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_url",id:"event_url",placeholder:"Event Url",type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.currentEvent.event_url=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_url]])])]),(0,l.Lk)("div",c,[(0,l.Lk)("div",d,[t[14]||(t[14]=(0,l.Lk)("label",{for:"event_date"},"Event Date",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_date",id:"event_date",placeholder:"Event Date",type:"date","onUpdate:modelValue":t[6]||(t[6]=t=>e.currentEvent.event_date=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_date]])])])]),(0,l.Lk)("div",v,[(0,l.Lk)("div",p,[(0,l.Lk)("div",m,[t[15]||(t[15]=(0,l.Lk)("label",{for:"event_type"},"Event Type",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_type",id:"event_type",placeholder:"Event Type",type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.currentEvent.event_type=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_type]])])]),(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[t[16]||(t[16]=(0,l.Lk)("label",{for:"event_status"},"Event Status",-1)),(0,l.bo)((0,l.Lk)("input",{name:"event_status",id:"event_status",placeholder:"Event Status",type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.currentEvent.event_status=t),class:"form-control"},null,512),[[l.Jo,e.currentEvent.event_status]])])])]),(0,l.Lk)("div",g,[t[17]||(t[17]=(0,l.Lk)("label",{for:"setlist"},"Setlist",-1)),(0,l.bF)(C,{tracksData:e.currentEvent.event_setlist,onUpdateTracks:e.handleUpdateTrackList},null,8,["tracksData","onUpdateTracks"])]),(0,l.Lk)("div",y,[t[18]||(t[18]=(0,l.Lk)("label",{for:"event_status"},"Talent",-1)),(0,l.bF)(S,{items:e.talentOptions,"model-value":e.selectedTalents,"onUpdate:modelValue":e.handleSelectedTalentsChange},null,8,["items","model-value","onUpdate:modelValue"])])])),footer:(0,l.k6)((()=>[(0,l.Lk)("button",{class:"btn btn-primary",onClick:t[9]||(t[9]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,l.bF)(U,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Event":"Add New Event"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,l.bF)(T,{ref:"eventTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var b=n(1313),L=n(8277),E=n(1721),f=n(6423),C=n(309),S=n(1515);const U={class:"col-md-1"},K=["onUpdate:modelValue"],T={class:"col-md-2"},w=["onUpdate:modelValue"],P={class:"col-md-4"},V=["onUpdate:modelValue"],X={class:"col-md-4"},x=["onUpdate:modelValue"],D={class:"col-md-1"},R=["onClick"];function A(e,t,n,a,o,s){return(0,l.uX)(),(0,l.CE)(l.FK,null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.tracks,((e,n)=>((0,l.uX)(),(0,l.CE)("div",{key:n,class:"form-row"},[(0,l.Lk)("div",U,[(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.track_number=t,placeholder:"track_number",class:"form-control form-control-sm"},null,8,K),[[l.Jo,e.track_number]])]),(0,l.Lk)("div",T,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.time_stamp=t,placeholder:"time_stamp",class:"form-control form-control-sm"},null,8,w),[[l.Jo,e.time_stamp]])]),(0,l.Lk)("div",P,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.romaji_title=t,placeholder:"romaji_title",class:"form-control form-control-sm"},null,8,V),[[l.Jo,e.romaji_title]])]),(0,l.Lk)("div",X,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t,placeholder:"name",class:"form-control form-control-sm"},null,8,x),[[l.Jo,e.name]])]),(0,l.Lk)("div",D,[(0,l.Lk)("button",{class:"btn btn-sm btn-success",onClick:e=>a.deleteTrack(n)},t[1]||(t[1]=[(0,l.Lk)("i",{class:"pe-7s-close-circle"},null,-1)]),8,R)])])))),128)),(0,l.Lk)("button",{class:"btn btn-sm btn-success",onClick:t[0]||(t[0]=(...e)=>a.addEmptyTrack&&a.addEmptyTrack(...e))},t[2]||(t[2]=[(0,l.Lk)("i",{class:"pe-7s-plus"},null,-1)]))],64)}var I={name:"SetlistComponent",emits:["updateTracks"],props:{tracksData:{type:Array,required:!1,default:()=>null}},setup(e,{emit:t}){const n=(0,l.Kh)([]);(0,l.wB)((()=>e.tracksData),(e=>{e&&n.splice(0,n.length,...e)}),{immediate:!0});const a=()=>{n.push({time_stamp:"",track_number:"",romaji_title:"",name:""}),t("updateTracks",n)},o=e=>{n.splice(e,1),t("updateTracks",n)};return{tracks:n,addEmptyTrack:a,deleteTrack:o}}},M=n(6262);const F=(0,M.A)(I,[["render",A]]);var J=F;const O={class:"form-inline"},j={class:"input-group mb-2"},B={class:"table table-hover table-sm table-bordered"},N=["id","onClick"],H={key:0},Q={key:1},z={key:2},W=["onClick"],$=["onClick"],q=["onClick"],G={key:0,class:"details-row"},Y={colspan:"6"},Z={key:1},ee=["colspan"],te=["id","onClick"],ne={key:0},le={key:1},ae={key:2};function oe(e,t,n,a,o,s){const u=(0,l.g2)("pagination-component");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",O,[(0,l.Lk)("div",j,[(0,l.bo)((0,l.Lk)("input",{placeholder:"Searching...",onInput:t[0]||(t[0]=(...t)=>e.onSearch&&e.onSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=t=>e.search=t),type:"text",class:"form-control",name:"search"},null,544),[[l.Jo,e.search]]),t[2]||(t[2]=(0,l.Lk)("div",{class:"input-group-append"},[(0,l.Lk)("button",{class:"btn btn-primary"},[(0,l.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,l.Lk)("table",B,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[t[3]||(t[3]=(0,l.Lk)("th",null,[(0,l.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,(t=>((0,l.uX)(),(0,l.CE)("th",{key:t.key,id:t.key,onClick:n=>e.changeOrder(t.key)},[(0,l.eW)((0,l.v_)(t.value)+" ",1),e.orderBy===t.key&&"asc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",H,"▼")):e.orderBy===t.key&&"desc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",Q,"▲")):((0,l.uX)(),(0,l.CE)("span",z,"◆"))],8,N)))),128)),t[4]||(t[4]=(0,l.Lk)("th",null,"Action",-1))])]),(0,l.Lk)("tbody",null,[e.items.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.items,((n,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:a},[(0,l.Lk)("tr",null,[t[7]||(t[7]=(0,l.Lk)("td",null,[(0,l.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,l.Lk)("td",null,(0,l.v_)(n.id),1),(0,l.Lk)("td",null,(0,l.v_)(n.event_title),1),(0,l.Lk)("td",null,(0,l.v_)(n.event_summary),1),(0,l.Lk)("td",null,(0,l.v_)(n.event_date),1),(0,l.Lk)("td",null,(0,l.v_)(n.event_hashtag),1),(0,l.Lk)("td",null,[(0,l.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:t=>e.handleUpdate(n)},t[5]||(t[5]=[(0,l.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,W),(0,l.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:t=>e.handleDelete(n.id)},t[6]||(t[6]=[(0,l.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,$),(0,l.Lk)("button",{type:"button",onClick:t=>e.toggleDetails(a),class:"btn btn-sm btn-info"},[(0,l.Lk)("i",{class:(0,l.C4)(["pe-7s-angle-right",e.expandedRows[a]?"rotate-icon":""])},null,2)],8,q)])]),e.expandedRows[a]?((0,l.uX)(),(0,l.CE)("tr",G,[(0,l.Lk)("td",Y,[(0,l.Lk)("div",null,[t[8]||(t[8]=(0,l.Lk)("p",null,"Talents : ",-1)),(0,l.Lk)("p",null,(0,l.v_)(n.talents),1)])])])):(0,l.Q3)("",!0)],64)))),128)):((0,l.uX)(),(0,l.CE)("tr",Z,[(0,l.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,ee)]))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[t[9]||(t[9]=(0,l.Lk)("th",null,[(0,l.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,(t=>((0,l.uX)(),(0,l.CE)("th",{key:t.key,id:t.key,onClick:n=>e.changeOrder(t.key)},[(0,l.eW)((0,l.v_)(t.value)+" ",1),e.orderBy===t.key&&"asc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",ne,"▼")):e.orderBy===t.key&&"desc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",le,"▲")):((0,l.uX)(),(0,l.CE)("span",ae,"◆"))],8,te)))),128)),t[10]||(t[10]=(0,l.Lk)("th",null,"Action",-1))])])]),(0,l.bF)(u,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var se=n(9794),ue=n(9274),re=(0,l.pM)({name:"EventTable",components:{ModalComponent:b.A,TableComponent:se.A,PaginationComponent:ue.A,NotificationComponent:E.A,ButtonSpinner:f.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:t}){const n=(0,l.KR)("event_date"),a=(0,l.KR)("desc"),o=(0,l.KR)(1),s=(0,l.KR)(20),u=(0,l.KR)(0),r=(0,l.KR)(0),i=(0,l.KR)(""),c=(0,l.KR)([]),d=[{key:"id",value:"ID"},{key:"event_title",value:"Title"},{key:"event_summary",value:"Summary"},{key:"event_date",value:"Date"},{key:"event_hashtag",value:"Hashtag"}],v=(0,l.KR)([]),p=async()=>{i.value&&(o.value=1);const e=await S.K.getEventsWithPaging(o.value,s.value,n.value,a.value,i.value);e.error||(v.value=e.items,u.value=e.totalItems,r.value=e.totalPages,s.value=s.value)},m=e=>{t("handleUpdate",e)},k=async e=>{const n=confirm(`Are you sure you want to delete Event ${e}?`);n&&t("handleDelete",e)},h=e=>{o.value=e,p()},g=()=>{o.value=1,p()},y=e=>{e===n.value?"asc"===a.value?a.value="desc":"desc"===a.value?a.value="":a.value="asc":(n.value=e,a.value="asc"),p()},_=async e=>{s.value=e,o.value=1,await p()},b=e=>{c.value[e]=!c.value[e]};return(0,l.sV)((()=>{p()})),{currentPage:o,itemsPerPage:s,totalItems:u,totalPages:r,fields:d,items:v,search:i,orderBy:n,orderDirection:a,expandedRows:c,loadPage:h,changePageSize:_,onSearch:g,changeOrder:y,handleDelete:k,handleUpdate:m,getEventsData:p,toggleDetails:b}}});const ie=(0,M.A)(re,[["render",oe]]);var ce=ie,de=(0,l.pM)({name:"EventsPage",components:{ModalComponent:b.A,PageTitleComponent:L.A,NotificationComponent:E.A,ButtonSpinner:f.A,TagSelectorComponent:C.A,SetlistComponent:J,EventTable:ce},setup(){const e=(0,l.KR)("Events"),t=(0,l.KR)("Events"),n=(0,l.KR)("pe-7s-date icon-gradient bg-tempting-azure"),a=(0,l.KR)(!1),o=(0,l.KR)(!1),s=(0,l.KR)(!1),u=(0,l.KR)(null),r=(0,l.KR)(null),i=(0,l.KR)([]),c=(0,l.KR)([]),d=(0,l.Kh)({event_title:null,event_summary:null,event_hashtag:null,event_url:null,event_date:null,event_type:null,event_status:null,event_setlist:null}),v=async()=>{const e=await S.K.getTalents();i.value=e},p=async()=>{s.value=!0,a.value?k():m()},m=async()=>{try{await S.K.createEvent(d,c.value),g(),s.value=!1,u.value={title:"Success",content:"Event created successfully!",type:"success"},y()}catch(e){s.value=!1,u.value={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}},k=async()=>{try{await S.K.updateEvent(d,c.value),g(),s.value=!1,u.value={title:"Success",content:"Event updated successfully!",type:"success"},y(),a.value=!1}catch(e){s.value=!1,u.value={title:"Error",content:`Error when updating Event: ${e}`,type:"danger"},a.value=!1}},h=()=>{Object.assign(d,{event_title:null,event_summary:null,event_hashtag:null,event_url:null,event_date:null,event_type:null,event_status:null,event_setlist:null}),d.id&&delete d.id,c.value=[]},g=()=>{h(),o.value=!o.value},y=()=>{r.value&&r.value.getEventsData()},_=e=>{c.value=e},b=e=>{d.event_setlist=e},L=e=>{a.value=!0,e&&(d.id=e.id,d.event_title=e.event_title,d.event_summary=e.event_summary,d.event_hashtag=e.event_hashtag,d.event_url=e.event_url,d.event_date=e.event_date,d.event_type=e.event_type,d.event_status=e.event_status,d.event_setlist=e.event_setlist,c.value=e.event_talent.map((e=>({id:e.talent.id,name:e.talent.name})))),o.value=!0},E=async e=>{try{await S.K.deleteEvent(e),u.value={title:"Success",content:"Event deleted successfully!",type:"success"},y()}catch(t){u.value={title:"Error",content:`Error when deleting Event: ${t}`,type:"danger"}}};return(0,l.sV)((async()=>{await v()})),{heading:e,subheading:t,icon:n,isUpdateMode:a,showModal:o,onSubmit:s,notification:u,talentOptions:i,selectedTalents:c,currentEvent:d,eventTable:r,handleSelectedTalentsChange:_,handleUpdateTrackList:b,toggleModal:g,handleSubmit:p,handleUpdateClick:L,handleDeleteClick:E}}});const ve=(0,M.A)(de,[["render",_]]);var pe=ve}}]);