"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[8601],{1721:function(e,t,o){o.d(t,{A:function(){return d}});var n=o(9726);const s={class:"notification-heading"},a={class:"notification-title"},r={class:"notification-content"};function i(e,t,o,i,l,c){return null!==e.notification?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,n.C4)(["notification",`alert-${e.notification.type}`])},[(0,n.Lk)("div",s,[(0,n.Lk)("div",a,(0,n.v_)(e.notification.title),1),(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.closeNotification&&e.closeNotification(...t)),class:"close"},t[1]||(t[1]=[(0,n.Lk)("span",null,"Ã—",-1)]))]),(0,n.Lk)("div",r,(0,n.v_)(e.notification.content),1)],2)):(0,n.Q3)("",!0)}var l=(0,n.pM)({name:"NotificationComponent",props:{notification:{type:Object,required:!1}},setup(e,{emit:t}){const o=()=>{t("update:notification",null)};return(0,n.wB)((()=>e.notification),(e=>{e&&setTimeout((()=>{o()}),2e3)})),{closeNotification:o}}}),c=o(6262);const u=(0,c.A)(l,[["render",i],["__scopeId","data-v-4cf65ca2"]]);var d=u},7916:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var n=o(9726);const s={class:"form"},a={class:"position-relative form-group"},r={key:0,class:"text-danger"},i={class:"position-relative form-group"},l={class:"input-group"},c=["type"],u={key:0,class:"text-danger"},d={class:"position-relative form-group"},m={class:"input-group"},p=["type"],g={key:0,class:"text-danger"},f={class:"position-relative form-check"},w={class:"form-check-label"};function v(e,t,o,v,k,b){const _=(0,n.g2)("page-title-component"),h=(0,n.g2)("NotificationComponent"),y=(0,n.g2)("button-spinner"),U=(0,n.g2)("modal-component"),C=(0,n.g2)("table-component"),P=(0,n.g2)("pagination-component");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(_,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,n.k6)((()=>[(0,n.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.toggleModal&&e.toggleModal(...t)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Add New User ")])),_:1},8,["heading","subheading","icon"]),(0,n.bF)(h,{notification:e.notification,"onUpdate:notification":t[1]||(t[1]=t=>e.notification=t)},null,8,["notification"]),(0,n.bF)(U,{title:"Add New User",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,n.k6)((()=>[(0,n.Lk)("div",s,[(0,n.Lk)("div",a,[t[9]||(t[9]=(0,n.Lk)("label",{for:"user_email"},"User Email",-1)),(0,n.bo)((0,n.Lk)("input",{name:"user_email",id:"user_email",placeholder:"Enter email...",type:"email",class:"form-control",autocomplete:"off","onUpdate:modelValue":t[2]||(t[2]=t=>e.currentUser.email=t)},null,512),[[n.Jo,e.currentUser.email]]),e.validationErrors.email?((0,n.uX)(),(0,n.CE)("small",r,(0,n.v_)(e.validationErrors.email),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",i,[t[11]||(t[11]=(0,n.Lk)("label",{for:"user_password"},"User Password",-1)),(0,n.Lk)("div",l,[(0,n.bo)((0,n.Lk)("input",{name:"user_password",type:e.isPasswordVisible?"text":"password",class:"form-control",id:"user_password",autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=t=>e.currentUser.password=t),placeholder:"Enter password..."},null,8,c),[[n.hp,e.currentUser.password]]),(0,n.Lk)("div",{class:"input-group-append",onClick:t[4]||(t[4]=(...t)=>e.togglePassword&&e.togglePassword(...t))},t[10]||(t[10]=[(0,n.Lk)("span",{class:"input-group-text"},"Show",-1)]))]),e.validationErrors.password?((0,n.uX)(),(0,n.CE)("small",u,(0,n.v_)(e.validationErrors.password),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",d,[t[13]||(t[13]=(0,n.Lk)("label",{for:"confirm_user_password"},"Confirm User Password",-1)),(0,n.Lk)("div",m,[(0,n.bo)((0,n.Lk)("input",{type:e.isConfirmPasswordVisible?"text":"password",class:"form-control",id:"confirm_user_password","onUpdate:modelValue":t[5]||(t[5]=t=>e.currentUser.confirm_password=t),placeholder:"Enter confirm password..."},null,8,p),[[n.hp,e.currentUser.confirm_password]]),(0,n.Lk)("div",{class:"input-group-append",onClick:t[6]||(t[6]=(...t)=>e.toggleConfirmPassword&&e.toggleConfirmPassword(...t))},t[12]||(t[12]=[(0,n.Lk)("span",{class:"input-group-text"},"Show",-1)]))]),e.validationErrors.confirm_password?((0,n.uX)(),(0,n.CE)("small",g,(0,n.v_)(e.validationErrors.confirm_password),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",f,[(0,n.Lk)("label",w,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=t=>e.currentUser.email_confirm=t)},null,512),[[n.lH,e.currentUser.email_confirm]]),t[14]||(t[14]=(0,n.eW)("Auto Confirm User ?"))])])])])),footer:(0,n.k6)((()=>[(0,n.Lk)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,n.bF)(y,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmitUser,normalText:"Add New Talent"},null,8,["isLoading","onClick"])])),_:1},8,["isOpen","onCloseModal"]),(0,n.bF)(C,{footer:!0,fields:e.fields,items:e.items,onDeleteRow:e.handleDeleteUser},null,8,["fields","items","onDeleteRow"]),(0,n.bF)(P,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages},null,8,["currentPage","perPage","totalItems","totalPages"])])}var k=o(8277),b=o(1721),_=o(9794),h=o(9274),y=o(1313),U=o(6423),C=o(1090),P=o(7189),L=(0,n.pM)({name:"UserPage",components:{PageTitleComponent:k.A,NotificationComponent:b.A,TableComponent:_.A,PaginationComponent:h.A,ModalComponent:y.A,ButtonSpinner:U.A},setup(){const e=(0,n.KR)("User"),t=(0,n.KR)("User"),o=(0,n.KR)("pe-7s-users icon-gradient bg-tempting-azure"),s=(0,n.KR)(!1),a=(0,n.KR)(!1),r=(0,n.KR)(!1),i=(0,n.KR)(!1),l=(0,n.KR)(null),c=(0,n.Kh)({email:null,password:null,confirm_password:null,email_confirm:!1}),u=(0,n.KR)({}),d=(0,n.KR)(0),m=(0,n.KR)(20),p=(0,n.KR)(0),g=(0,n.KR)(0),f=(0,n.KR)([{key:"id",value:"Id"},{key:"email",value:"email"},{key:"last_sign_in_at",value:"last Sign In"},{key:"user_role",value:"User Role"}]),w=(0,n.KR)([]),v=()=>{s.value=!s.value},k=()=>{r.value=!r.value},b=()=>{i.value=!i.value},_=async(e,t)=>{const o=await P.K.getAuthUsers(e,t);o.error||(w.value=o.items,p.value=o.totalItems,g.value=o.totalPages,m.value=t)},h=async()=>{try{await P.K.createAuthUser(c),L(),v(),a.value=!1,l.value={title:"Success",content:"User created successfully!",type:"success"},_()}catch(e){a.value=!1,l.value={title:"Error",content:`Error when submitting User:${e}`,type:"danger"}}},y=async()=>{a.value=!0,u.value=(0,C.GN)(c),0===Object.keys(u.value).length?h():a.value=!1},U=async e=>{if(confirm(`Are you sure you want to delete User ${e}?`))try{await P.K.deleteAuthUser(e),l.value={title:"Success",content:"User deleted successfully!",type:"success"},_()}catch(t){l.value={title:"Error",content:`Error when deleting User: ${t}`,type:"danger"}}},L=()=>{Object.assign(c,{email:null,password:null,confirm_password:null,email_confirm:!1})};return(0,n.sV)((()=>{_(d.value,m.value)})),{heading:e,subheading:t,icon:o,showModal:s,onSubmit:a,isPasswordVisible:r,isConfirmPasswordVisible:i,notification:l,currentUser:c,validationErrors:u,currentPage:d,itemsPerPage:m,totalItems:p,totalPages:g,fields:f,items:w,toggleModal:v,togglePassword:k,toggleConfirmPassword:b,handleSubmitUser:y,handleDeleteUser:U}}}),E=o(6262);const K=(0,E.A)(L,[["render",v]]);var x=K},1090:function(e,t,o){o.d(t,{GN:function(){return s},h$:function(){return a},y5:function(){return n}});const n=e=>{const t={};return e.agency_name&&0!==e.agency_name.trim().length||(t.agency_name="Agency Name is required."),t},s=e=>{const t={};return e.email&&0!==e.email.trim().length?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.email)||(t.email="Please enter a valid email format."):t.email="User email is required.",e.password&&0!==e.password.trim().length||(t.password="User password is required."),e.confirm_password&&0!==e.confirm_password.trim().length?e.password!==e.confirm_password&&(t.confirm_password="Password and confirm password must match."):t.confirm_password="User confirm password is required.",t},a=e=>{const t={};return e.source_text&&0!==e.source_text.trim().length||(t.source_text="Source text is required."),e.target_text&&0!==e.target_text.trim().length||(t.target_text="Target text is required."),t}}}]);