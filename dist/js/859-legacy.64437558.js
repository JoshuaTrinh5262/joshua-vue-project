"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[859],{7916:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var s=o(9726);const r={class:"form"},a={class:"position-relative form-group"},n={key:0,class:"text-danger"},l={class:"position-relative form-group"},i={class:"input-group"},u=["type"],c={key:0,class:"text-danger"},d={class:"position-relative form-group"},m={class:"input-group"},p=["type"],g={key:0,class:"text-danger"},f={class:"position-relative form-check"},w={class:"form-check-label"};function v(e,t,o,v,b,h){const _=(0,s.g2)("page-title-component"),k=(0,s.g2)("NotificationComponent"),U=(0,s.g2)("button-spinner"),y=(0,s.g2)("modal-component"),P=(0,s.g2)("table-component"),C=(0,s.g2)("pagination-component");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(_,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,s.k6)((()=>[(0,s.Lk)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.toggleModal&&e.toggleModal(...t)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Add New User ")])),_:1},8,["heading","subheading","icon"]),(0,s.bF)(k,{notification:e.notification,"onUpdate:notification":t[1]||(t[1]=t=>e.notification=t)},null,8,["notification"]),(0,s.bF)(y,{title:"Add New User",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,s.k6)((()=>[(0,s.Lk)("div",r,[(0,s.Lk)("div",a,[t[9]||(t[9]=(0,s.Lk)("label",{for:"user_email"},"User Email",-1)),(0,s.bo)((0,s.Lk)("input",{name:"user_email",id:"user_email",placeholder:"Enter email...",type:"email",class:"form-control",autocomplete:"off","onUpdate:modelValue":t[2]||(t[2]=t=>e.currentUser.email=t)},null,512),[[s.Jo,e.currentUser.email]]),e.validationErrors.email?((0,s.uX)(),(0,s.CE)("small",n,(0,s.v_)(e.validationErrors.email),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",l,[t[11]||(t[11]=(0,s.Lk)("label",{for:"user_password"},"User Password",-1)),(0,s.Lk)("div",i,[(0,s.bo)((0,s.Lk)("input",{name:"user_password",type:e.isPasswordVisible?"text":"password",class:"form-control",id:"user_password",autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=t=>e.currentUser.password=t),placeholder:"Enter password..."},null,8,u),[[s.hp,e.currentUser.password]]),(0,s.Lk)("div",{class:"input-group-append",onClick:t[4]||(t[4]=(...t)=>e.togglePassword&&e.togglePassword(...t))},t[10]||(t[10]=[(0,s.Lk)("span",{class:"input-group-text"},"Show",-1)]))]),e.validationErrors.password?((0,s.uX)(),(0,s.CE)("small",c,(0,s.v_)(e.validationErrors.password),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",d,[t[13]||(t[13]=(0,s.Lk)("label",{for:"confirm_user_password"},"Confirm User Password",-1)),(0,s.Lk)("div",m,[(0,s.bo)((0,s.Lk)("input",{type:e.isConfirmPasswordVisible?"text":"password",class:"form-control",id:"confirm_user_password","onUpdate:modelValue":t[5]||(t[5]=t=>e.currentUser.confirm_password=t),placeholder:"Enter confirm password..."},null,8,p),[[s.hp,e.currentUser.confirm_password]]),(0,s.Lk)("div",{class:"input-group-append",onClick:t[6]||(t[6]=(...t)=>e.toggleConfirmPassword&&e.toggleConfirmPassword(...t))},t[12]||(t[12]=[(0,s.Lk)("span",{class:"input-group-text"},"Show",-1)]))]),e.validationErrors.confirm_password?((0,s.uX)(),(0,s.CE)("small",g,(0,s.v_)(e.validationErrors.confirm_password),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",f,[(0,s.Lk)("label",w,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=t=>e.currentUser.email_confirm=t)},null,512),[[s.lH,e.currentUser.email_confirm]]),t[14]||(t[14]=(0,s.eW)("Auto Confirm User ?"))])])])])),footer:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...t)=>e.toggleModal&&e.toggleModal(...t))},"Cancel"),(0,s.bF)(U,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmitUser,normalText:"Add New Talent"},null,8,["isLoading","onClick"])])),_:1},8,["isOpen","onCloseModal"]),(0,s.bF)(P,{footer:!0,fields:e.fields,items:e.items,onDeleteRow:e.handleDeleteUser},null,8,["fields","items","onDeleteRow"]),(0,s.bF)(C,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages},null,8,["currentPage","perPage","totalItems","totalPages"])])}var b=o(8277),h=o(1721),_=o(9794),k=o(9274),U=o(1313),y=o(6423),P=o(1090),C=o(1515),L=(0,s.pM)({name:"UserPage",components:{PageTitleComponent:b.A,NotificationComponent:h.A,TableComponent:_.A,PaginationComponent:k.A,ModalComponent:U.A,ButtonSpinner:y.A},setup(){const e=(0,s.KR)("User"),t=(0,s.KR)("User"),o=(0,s.KR)("pe-7s-users icon-gradient bg-tempting-azure"),r=(0,s.KR)(!1),a=(0,s.KR)(!1),n=(0,s.KR)(!1),l=(0,s.KR)(!1),i=(0,s.KR)(null),u=(0,s.Kh)({email:null,password:null,confirm_password:null,email_confirm:!1}),c=(0,s.KR)({}),d=(0,s.KR)(0),m=(0,s.KR)(20),p=(0,s.KR)(0),g=(0,s.KR)(0),f=(0,s.KR)([{key:"id",value:"Id"},{key:"email",value:"email"},{key:"last_sign_in_at",value:"last Sign In"},{key:"user_role",value:"User Role"}]),w=(0,s.KR)([]),v=()=>{r.value=!r.value},b=()=>{n.value=!n.value},h=()=>{l.value=!l.value},_=async(e,t)=>{const o=await C.K.getAuthUsers(e,t);o.error||(w.value=o.items,p.value=o.totalItems,g.value=o.totalPages,m.value=t)},k=async()=>{try{await C.K.createAuthUser(u),L(),v(),a.value=!1,i.value={title:"Success",content:"User created successfully!",type:"success"},_()}catch(e){a.value=!1,i.value={title:"Error",content:`Error when submitting User:${e}`,type:"danger"}}},U=async()=>{a.value=!0,c.value=(0,P.GN)(u),0===Object.keys(c.value).length?k():a.value=!1},y=async e=>{if(confirm(`Are you sure you want to delete User ${e}?`))try{await C.K.deleteAuthUser(e),i.value={title:"Success",content:"User deleted successfully!",type:"success"},_()}catch(t){i.value={title:"Error",content:`Error when deleting User: ${t}`,type:"danger"}}},L=()=>{Object.assign(u,{email:null,password:null,confirm_password:null,email_confirm:!1})};return(0,s.sV)((()=>{_(d.value,m.value)})),{heading:e,subheading:t,icon:o,showModal:r,onSubmit:a,isPasswordVisible:n,isConfirmPasswordVisible:l,notification:i,currentUser:u,validationErrors:c,currentPage:d,itemsPerPage:m,totalItems:p,totalPages:g,fields:f,items:w,toggleModal:v,togglePassword:b,toggleConfirmPassword:h,handleSubmitUser:U,handleDeleteUser:y}}}),E=o(6262);const K=(0,E.A)(L,[["render",v]]);var x=K},1090:function(e,t,o){o.d(t,{GN:function(){return r},h$:function(){return a},y5:function(){return s}});const s=e=>{const t={};return e.agency_name&&0!==e.agency_name.trim().length||(t.agency_name="Agency Name is required."),t},r=e=>{const t={};return e.email&&0!==e.email.trim().length?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.email)||(t.email="Please enter a valid email format."):t.email="User email is required.",e.password&&0!==e.password.trim().length||(t.password="User password is required."),e.confirm_password&&0!==e.confirm_password.trim().length?e.password!==e.confirm_password&&(t.confirm_password="Password and confirm password must match."):t.confirm_password="User confirm password is required.",t},a=e=>{const t={};return e.source_text&&0!==e.source_text.trim().length||(t.source_text="Source text is required."),e.target_text&&0!==e.target_text.trim().length||(t.target_text="Target text is required."),t}}}]);