"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[498],{1721:function(e,n,t){t.d(n,{A:function(){return d}});var a=t(9726);const o={class:"notification-heading"},l={class:"notification-title"},c={class:"notification-content"};function i(e,n,t,i,s,r){return null!==e.notification?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["notification",`alert-${e.notification.type}`])},[(0,a.Lk)("div",o,[(0,a.Lk)("div",l,(0,a.v_)(e.notification.title),1),(0,a.Lk)("button",{onClick:n[0]||(n[0]=(...n)=>e.closeNotification&&e.closeNotification(...n)),class:"close"},n[1]||(n[1]=[(0,a.Lk)("span",null,"×",-1)]))]),(0,a.Lk)("div",c,(0,a.v_)(e.notification.content),1)],2)):(0,a.Q3)("",!0)}var s=(0,a.pM)({name:"NotificationComponent",props:{notification:{type:Object,required:!1}},setup(e,{emit:n}){const t=()=>{n("update:notification",null)};return(0,a.wB)((()=>e.notification),(e=>{e&&setTimeout((()=>{t()}),2e3)})),{closeNotification:t}}}),r=t(6262);const u=(0,r.A)(s,[["render",i],["__scopeId","data-v-4cf65ca2"]]);var d=u},7697:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var a=t(9726);const o={class:"position-relative form-group"},l={key:0,class:"text-danger"},c={class:"position-relative form-group"},i={class:"position-relative form-group"};function s(e,n,t,s,r,u){const d=(0,a.g2)("page-title-component"),g=(0,a.g2)("NotificationComponent"),y=(0,a.g2)("button-spinner"),p=(0,a.g2)("modal-component"),m=(0,a.g2)("AgencyTable");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(d,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,a.k6)((()=>[(0,a.Lk)("button",{type:"button",onClick:n[0]||(n[0]=(...n)=>e.toggleModal&&e.toggleModal(...n)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,a.bF)(g,{notification:e.notification,"onUpdate:notification":n[1]||(n[1]=n=>e.notification=n)},null,8,["notification"]),(0,a.bF)(p,{title:e.isUpdateMode?"Update Agency":"Add New Agency",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,a.k6)((()=>[(0,a.Lk)("div",o,[n[6]||(n[6]=(0,a.Lk)("label",{for:"agency_name"},"Agency Name",-1)),(0,a.bo)((0,a.Lk)("input",{name:"agency_name",id:"agency_name",placeholder:"Agency Name",type:"text","onUpdate:modelValue":n[2]||(n[2]=n=>e.currentAgency.agency_name=n),class:"form-control"},null,512),[[a.Jo,e.currentAgency.agency_name]]),e.validationErrors.agency_name?((0,a.uX)(),(0,a.CE)("small",l,(0,a.v_)(e.validationErrors.agency_name),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",c,[n[7]||(n[7]=(0,a.Lk)("label",{for:"agency_status"},"Agency Status",-1)),(0,a.bo)((0,a.Lk)("input",{name:"agency_status",id:"agency_status",placeholder:"Agency Status",type:"text","onUpdate:modelValue":n[3]||(n[3]=n=>e.currentAgency.agency_status=n),class:"form-control"},null,512),[[a.Jo,e.currentAgency.agency_status]])]),(0,a.Lk)("div",i,[n[8]||(n[8]=(0,a.Lk)("label",{for:"agency_description"},"Agency Description",-1)),(0,a.bo)((0,a.Lk)("textarea",{rows:"5",name:"agency_description",id:"agency_description",placeholder:"Agency Description",type:"text","onUpdate:modelValue":n[4]||(n[4]=n=>e.currentAgency.agency_description=n),class:"form-control"},null,512),[[a.Jo,e.currentAgency.agency_description]])])])),footer:(0,a.k6)((()=>[(0,a.Lk)("button",{class:"btn btn-primary",onClick:n[5]||(n[5]=(...n)=>e.toggleModal&&e.toggleModal(...n))},"Cancel"),(0,a.bF)(y,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Agency":"Add New Agency"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,a.bF)(m,{ref:"agencyTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var r=t(1313),u=t(9794),d=t(1721),g=t(8277),y=t(6423);const p={class:"form-inline"},m={class:"input-group mb-2"},k={class:"table table-hover table-sm table-bordered"},v=["id","onClick"],h={key:0},b={key:1},f={key:2},_=["href"],A=["onClick"],C=["onClick"],L=["onClick"],w={key:0,class:"details-row"},E={colspan:"6"},K={key:1},P=["colspan"],x=["id","onClick"],R={key:0},S={key:1},U={key:2};function D(e,n,t,o,l,c){const i=(0,a.g2)("pagination-component");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",p,[(0,a.Lk)("div",m,[(0,a.bo)((0,a.Lk)("input",{placeholder:"Searching...",onInput:n[0]||(n[0]=(...n)=>e.onSearch&&e.onSearch(...n)),"onUpdate:modelValue":n[1]||(n[1]=n=>e.search=n),type:"text",class:"form-control",name:"search"},null,544),[[a.Jo,e.search]]),n[2]||(n[2]=(0,a.Lk)("div",{class:"input-group-append"},[(0,a.Lk)("button",{class:"btn btn-primary"},[(0,a.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,a.Lk)("table",k,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[n[3]||(n[3]=(0,a.Lk)("th",null,[(0,a.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.fields,(n=>((0,a.uX)(),(0,a.CE)("th",{key:n.key,id:n.key,onClick:t=>e.changeOrder(n.key)},[(0,a.eW)((0,a.v_)(n.value)+" ",1),e.orderBy===n.key&&"asc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",h,"▼")):e.orderBy===n.key&&"desc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",b,"▲")):((0,a.uX)(),(0,a.CE)("span",f,"◆"))],8,v)))),128)),n[4]||(n[4]=(0,a.Lk)("th",null,"Action",-1))])]),(0,a.Lk)("tbody",null,[e.items.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.items,((t,o)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:o},[(0,a.Lk)("tr",null,[n[7]||(n[7]=(0,a.Lk)("td",null,[(0,a.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,a.Lk)("td",null,(0,a.v_)(t.id),1),(0,a.Lk)("td",null,[(0,a.Lk)("a",{href:`agency/${t.id}`},(0,a.v_)(t.agency_name),9,_)]),(0,a.Lk)("td",null,(0,a.v_)(t.agency_status),1),(0,a.Lk)("td",null,(0,a.v_)(t.talent_count),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:n=>e.handleUpdate(t)},n[5]||(n[5]=[(0,a.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,A),(0,a.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:n=>e.handleDelete(t.id)},n[6]||(n[6]=[(0,a.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,C),(0,a.Lk)("button",{type:"button",onClick:n=>e.toggleDetails(o),class:"btn btn-sm btn-info"},[(0,a.Lk)("i",{class:(0,a.C4)(["pe-7s-angle-right",e.expandedRows[o]?"rotate-icon":""])},null,2)],8,L)])]),e.expandedRows[o]?((0,a.uX)(),(0,a.CE)("tr",w,[(0,a.Lk)("td",E,[(0,a.Lk)("div",null,[n[8]||(n[8]=(0,a.Lk)("p",null,"Agency Description: ",-1)),(0,a.Lk)("p",null,(0,a.v_)(t.agency_description),1)])])])):(0,a.Q3)("",!0)],64)))),128)):((0,a.uX)(),(0,a.CE)("tr",K,[(0,a.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,P)]))]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[n[9]||(n[9]=(0,a.Lk)("th",null,[(0,a.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.fields,(n=>((0,a.uX)(),(0,a.CE)("th",{key:n.key,id:n.key,onClick:t=>e.changeOrder(n.key)},[(0,a.eW)((0,a.v_)(n.value)+" ",1),e.orderBy===n.key&&"asc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",R,"▼")):e.orderBy===n.key&&"desc"===e.orderDirection?((0,a.uX)(),(0,a.CE)("span",S,"▲")):((0,a.uX)(),(0,a.CE)("span",U,"◆"))],8,x)))),128)),n[10]||(n[10]=(0,a.Lk)("th",null,"Action",-1))])])]),(0,a.bF)(i,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var M=t(9274),X=t(7189),N=(0,a.pM)({name:"AgencyTable",components:{ModalComponent:r.A,TableComponent:u.A,PaginationComponent:M.A,NotificationComponent:d.A,ButtonSpinner:y.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:n}){const t=(0,a.KR)("agency_id"),o=(0,a.KR)("asc"),l=(0,a.KR)(1),c=(0,a.KR)(10),i=(0,a.KR)(0),s=(0,a.KR)(0),r=(0,a.KR)(""),u=(0,a.KR)(null),d=(0,a.Kh)({agency_name:null,agency_status:null,agency_description:null}),g=(0,a.KR)([]),y=[{key:"id",value:"Id"},{key:"agency_name",value:"Agency Name"},{key:"agency_status",value:"Agency Status"},{key:"talent_count",value:"Agency Count"}],p=(0,a.KR)([]),m=async()=>{r.value&&(l.value=1);const e=await X.K.getAgenciesWithPaging(l.value,c.value,t.value,o.value,r.value);e.error||(p.value=e.items,i.value=e.totalItems,s.value=e.totalPages,c.value=c.value)},k=e=>{n("handleUpdate",e)},v=async e=>{const t=confirm(`Are you sure you want to delete Agency ${e}?`);t&&n("handleDelete",e)},h=e=>{l.value=e,m()},b=()=>{l.value=1,m()},f=e=>{e===t.value?"asc"===o.value?o.value="desc":"desc"===o.value?o.value="":o.value="asc":(t.value=e,o.value="asc"),m()},_=async e=>{c.value=e,l.value=1,await m()},A=e=>{g.value[e]=!g.value[e]};return(0,a.sV)((()=>{m()})),{currentPage:l,itemsPerPage:c,totalItems:i,totalPages:s,fields:y,items:p,currentAgency:d,notification:u,search:r,orderBy:t,orderDirection:o,expandedRows:g,loadPage:h,changePageSize:_,onSearch:b,changeOrder:f,handleDelete:v,handleUpdate:k,getAgenciesData:m,toggleDetails:A}}}),T=t(6262);const F=(0,T.A)(N,[["render",D]]);var I=F,B=t(1090),O=(0,a.pM)({name:"AgenciesPage",components:{ModalComponent:r.A,TableComponent:u.A,PageTitleComponent:g.A,NotificationComponent:d.A,ButtonSpinner:y.A,AgencyTable:I},setup(){const e=(0,a.KR)("Agencies"),n=(0,a.KR)("Explore the Profiles of Emerging and Established Agencys."),t=(0,a.KR)("pe-7s-home icon-gradient bg-tempting-azure"),o=(0,a.KR)(null),l=(0,a.KR)(!1),c=(0,a.KR)(!1),i=(0,a.KR)(!1),s=(0,a.KR)(null),r=(0,a.Kh)({agency_name:null,agency_status:null,agency_description:null}),u=(0,a.KR)({}),d=()=>{l.value=!1,v(),c.value=!c.value},g=()=>{o.value&&o.value.getAgenciesData()},y=async()=>{i.value=!0,u.value=(0,B.y5)(r),0===Object.keys(u.value).length?l.value?m():p():i.value=!1},p=async()=>{try{await X.K.createAgency(r),v(),d(),i.value=!1,s.value={title:"Success",content:"Agency created successfully!",type:"success"},g()}catch(e){i.value=!1,s.value={title:"Error",content:`Error when submitting Agency:${e}`,type:"danger"}}},m=async()=>{try{await X.K.updateAgency(r),v(),d(),i.value=!1,s.value={title:"Success",content:"Agency updated successfully!",type:"success"},g(),l.value=!1}catch(e){i.value=!1,s.value={title:"Error",content:`Error when updating Agency: ${e}`,type:"danger"},l.value=!1}},k=e=>{l.value=!0,e&&(r.id=e.id,r.agency_name=e.agency_name,r.agency_status=e.agency_status,r.agency_description=e.agency_description),c.value=!0},v=()=>{Object.assign(r,{agency_name:null,agency_status:null,agency_description:null}),r.id&&delete r.id},h=async e=>{try{await X.K.deleteAgency(e),s.value={title:"Success",content:"Agency deleted successfully!",type:"success"},g()}catch(n){s.value={title:"Error",content:`Error when deleting agency: ${n}`,type:"danger"}}};return{heading:e,subheading:n,icon:t,agencyTable:o,isUpdateMode:l,showModal:c,onSubmit:i,currentAgency:r,notification:s,validationErrors:u,toggleModal:d,reloadAgencyTable:g,handleSubmit:y,handleUpdateClick:k,handleDeleteClick:h,createAgency:p,updateAgency:m}}});const $=(0,T.A)(O,[["render",s]]);var j=$},1090:function(e,n,t){t.d(n,{GN:function(){return o},h$:function(){return l},y5:function(){return a}});const a=e=>{const n={};return e.agency_name&&0!==e.agency_name.trim().length||(n.agency_name="Agency Name is required."),n},o=e=>{const n={};return e.email&&0!==e.email.trim().length?/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.email)||(n.email="Please enter a valid email format."):n.email="User email is required.",e.password&&0!==e.password.trim().length||(n.password="User password is required."),e.confirm_password&&0!==e.confirm_password.trim().length?e.password!==e.confirm_password&&(n.confirm_password="Password and confirm password must match."):n.confirm_password="User confirm password is required.",n},l=e=>{const n={};return e.source_text&&0!==e.source_text.trim().length||(n.source_text="Source text is required."),e.target_text&&0!==e.target_text.trim().length||(n.target_text="Target text is required."),n}}}]);