"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[189],{309:function(e,a,l){l.d(a,{A:function(){return m}});var t=l(9726);const n={class:"tag-container"},o={class:"tags"},r={key:0},s=["onClick"],i=["value"];function c(e,a,l,c,u,d){return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",o,[0===e.selected.length?((0,t.uX)(),(0,t.CE)("div",r,"No selected value.")):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.selected,(a=>((0,t.uX)(),(0,t.CE)("span",{key:a.id,class:"tag"},[(0,t.eW)((0,t.v_)(a.name)+" ",1),(0,t.Lk)("button",{class:"remove-tag",onClick:l=>e.removeItem(a)},"x",8,s)])))),128))]),(0,t.bo)((0,t.Lk)("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":a[0]||(a[0]=a=>e.searchQuery=a),onInput:a[1]||(a[1]=(...a)=>e.onSearch&&e.onSearch(...a)),class:"form-control search-input"},null,544),[[t.Jo,e.searchQuery]]),e.showOptions?((0,t.uX)(),(0,t.CE)("select",{key:0,onChange:a[2]||(a[2]=(...a)=>e.updateSelectedItems&&e.updateSelectedItems(...a)),multiple:"",class:"form-control"},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.filteredItems,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,t.v_)(e.name),9,i)))),128))],32)):(0,t.Q3)("",!0)])}var u=(0,t.pM)({name:"TagSelector",props:{items:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:a}){const l=(0,t.KR)([...e.modelValue]),n=(0,t.KR)(""),o=(0,t.KR)(!1),r=(0,t.EW)((()=>e.items.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),s=e=>l.value.some((a=>a.id===e.id)),i=e=>{l.value=l.value.filter((a=>a.id!==e.id)),a("update:modelValue",l.value)},c=()=>{o.value=""!==n.value.trim()&&r.value.length>0},u=t=>{const n=Array.from(t.target.selectedOptions);n.forEach((a=>{const t=a.value,n=e.items.find((e=>e.id===t));n&&(s(n)?l.value=l.value.filter((e=>e.id!==n.id)):l.value.push(n))})),a("update:modelValue",l.value)};return(0,t.wB)((()=>e.modelValue),(e=>{l.value=[...e]}),{immediate:!0}),{selected:l,searchQuery:n,filteredItems:r,showOptions:o,onSearch:c,removeItem:i,updateSelectedItems:u,isSelected:s}}}),d=l(6262);const p=(0,d.A)(u,[["render",c],["__scopeId","data-v-286852e2"]]);var m=p},2026:function(e,a,l){l.r(a),l.d(a,{default:function(){return q}});var t=l(9726);const n={class:"position-relative form-group"},o={class:"position-relative form-group"},r={class:"position-relative form-group"},s={class:"position-relative form-group"},i={class:"position-relative form-group"},c={class:"position-relative form-group"},u={class:"position-relative form-group"},d={class:"position-relative form-group"},p=["value"],m={class:"position-relative form-group"};function g(e,a,l,g,h,y){const k=(0,t.g2)("page-title-component"),v=(0,t.g2)("NotificationComponent"),b=(0,t.g2)("TagSelectorComponent"),L=(0,t.g2)("button-spinner"),f=(0,t.g2)("modal-component"),C=(0,t.g2)("DiscographyTable");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(k,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,t.k6)((()=>[(0,t.Lk)("button",{type:"button",onClick:a[0]||(a[0]=(...a)=>e.toggleModal&&e.toggleModal(...a)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,t.bF)(v,{notification:e.notification,"onUpdate:notification":a[1]||(a[1]=a=>e.notification=a)},null,8,["notification"]),(0,t.bF)(f,{title:e.isUpdateMode?"Update Discography":"Add New Discography",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,t.k6)((()=>[(0,t.Lk)("div",n,[a[11]||(a[11]=(0,t.Lk)("label",{for:"discography_name"},"Discography Name",-1)),(0,t.bo)((0,t.Lk)("input",{name:"discography_name",id:"discography_name",placeholder:"Discography Name","onUpdate:modelValue":a[2]||(a[2]=a=>e.currentDiscography.name=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.name]])]),(0,t.Lk)("div",o,[a[12]||(a[12]=(0,t.Lk)("label",{for:"original_name"},"Original Name",-1)),(0,t.bo)((0,t.Lk)("input",{name:"original_name",id:"original_name",placeholder:"Original Name","onUpdate:modelValue":a[3]||(a[3]=a=>e.currentDiscography.original_name=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.original_name]])]),(0,t.Lk)("div",r,[a[13]||(a[13]=(0,t.Lk)("label",{for:"released_date"},"Released Date",-1)),(0,t.bo)((0,t.Lk)("input",{name:"released_date",id:"released_date",placeholder:"Released Date","onUpdate:modelValue":a[4]||(a[4]=a=>e.currentDiscography.released_date=a),type:"date",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.released_date]])]),(0,t.Lk)("div",s,[a[14]||(a[14]=(0,t.Lk)("label",{for:"lyricist"},"Lyricist",-1)),(0,t.bo)((0,t.Lk)("input",{name:"lyricist",id:"lyricist",placeholder:"lyricist","onUpdate:modelValue":a[5]||(a[5]=a=>e.currentDiscography.lyricist=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.lyricist]])]),(0,t.Lk)("div",i,[a[15]||(a[15]=(0,t.Lk)("label",{for:"composer"},"Composer",-1)),(0,t.bo)((0,t.Lk)("input",{name:"composer",id:"composer",placeholder:"Composer","onUpdate:modelValue":a[6]||(a[6]=a=>e.currentDiscography.composer=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.composer]])]),(0,t.Lk)("div",c,[a[16]||(a[16]=(0,t.Lk)("label",{for:"arrangement"},"Arrangement",-1)),(0,t.bo)((0,t.Lk)("input",{name:"arrangement",id:"arrangement",placeholder:"Arrangement","onUpdate:modelValue":a[7]||(a[7]=a=>e.currentDiscography.arrangement=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.arrangement]])]),(0,t.Lk)("div",u,[a[17]||(a[17]=(0,t.Lk)("label",{for:"ensemble_as"},"ensemble_as",-1)),(0,t.bo)((0,t.Lk)("input",{name:"ensemble_as",id:"ensemble_as",placeholder:"Ensemble As","onUpdate:modelValue":a[8]||(a[8]=a=>e.currentDiscography.ensemble_as=a),type:"text",class:"form-control"},null,512),[[t.Jo,e.currentDiscography.ensemble_as]])]),(0,t.Lk)("div",d,[a[19]||(a[19]=(0,t.Lk)("label",{for:"album"},"Album",-1)),(0,t.bo)((0,t.Lk)("select",{name:"select",id:"album","onUpdate:modelValue":a[9]||(a[9]=a=>e.currentDiscography.album_id=a),class:"form-control"},[a[18]||(a[18]=(0,t.Lk)("option",{value:null},null,-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.albumOptions,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,t.v_)(e.name),9,p)))),128))],512),[[t.u1,e.currentDiscography.album_id]])]),(0,t.Lk)("div",m,[a[20]||(a[20]=(0,t.Lk)("label",{for:"talent"},"Talent",-1)),(0,t.bF)(b,{items:e.talentOptions,"model-value":e.selectedTalents,"onUpdate:modelValue":e.handleselectedTalentsChange},null,8,["items","model-value","onUpdate:modelValue"])])])),footer:(0,t.k6)((()=>[(0,t.Lk)("button",{class:"btn btn-primary",onClick:a[10]||(a[10]=(...a)=>e.toggleModal&&e.toggleModal(...a))},"Cancel"),(0,t.bF)(L,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Discography":"Add New Discography"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,t.bF)(C,{ref:"discographyTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var h=l(1313),y=l(9794),k=l(8277),v=l(9274),b=l(6423),L=l(1721),f=l(309);const C={class:"form-inline"},_={class:"input-group mb-2"},D={class:"table table-hover table-sm table-bordered"},K=["id","onClick"],E={key:0},A={key:1},w={key:2},R=["href"],P=["href"],S=["onClick"],U=["onClick"],X=["onClick"],I={key:0,class:"details-row"},x={colspan:"9"},T={key:1},M=["colspan"],V=["id","onClick"],F={key:0},O={key:1},N={key:2};function J(e,a,l,n,o,r){const s=(0,t.g2)("pagination-component");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",C,[(0,t.Lk)("div",_,[(0,t.bo)((0,t.Lk)("input",{placeholder:"Searching...",onInput:a[0]||(a[0]=(...a)=>e.onSearch&&e.onSearch(...a)),"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),type:"text",class:"form-control",name:"search"},null,544),[[t.Jo,e.search]]),a[2]||(a[2]=(0,t.Lk)("div",{class:"input-group-append"},[(0,t.Lk)("button",{class:"btn btn-primary"},[(0,t.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,t.Lk)("table",D,[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[a[3]||(a[3]=(0,t.Lk)("th",null,[(0,t.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.fields,(a=>((0,t.uX)(),(0,t.CE)("th",{key:a.key,id:a.key,onClick:l=>e.changeOrder(a.key)},[(0,t.eW)((0,t.v_)(a.value)+" ",1),e.orderBy===a.key&&"asc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",E,"▼")):e.orderBy===a.key&&"desc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",A,"▲")):((0,t.uX)(),(0,t.CE)("span",w,"◆"))],8,K)))),128)),a[4]||(a[4]=(0,t.Lk)("th",null,"Action",-1))])]),(0,t.Lk)("tbody",null,[e.items.length>0?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)(e.items,((l,n)=>((0,t.uX)(),(0,t.CE)(t.FK,{key:n},[(0,t.Lk)("tr",null,[a[7]||(a[7]=(0,t.Lk)("td",null,[(0,t.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,t.Lk)("td",null,(0,t.v_)(l.id),1),(0,t.Lk)("td",null,[(0,t.Lk)("a",{href:`discography/${l.id}`},(0,t.v_)(l.name),9,R)]),(0,t.Lk)("td",null,(0,t.v_)(l.original_name),1),(0,t.Lk)("td",null,(0,t.v_)(l.released_date),1),(0,t.Lk)("td",null,[(0,t.Lk)("a",{href:`album/${l.album_id}`},(0,t.v_)(l.album),9,P)]),(0,t.Lk)("td",null,[(0,t.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:a=>e.handleUpdate(l)},a[5]||(a[5]=[(0,t.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,S),(0,t.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:a=>e.handleDelete(l.id)},a[6]||(a[6]=[(0,t.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,U),(0,t.Lk)("button",{type:"button",onClick:a=>e.toggleDetails(n),class:"btn btn-sm btn-info"},[(0,t.Lk)("i",{class:(0,t.C4)(["pe-7s-angle-right",e.expandedRows[n]?"rotate-icon":""])},null,2)],8,X)])]),e.expandedRows[n]?((0,t.uX)(),(0,t.CE)("tr",I,[(0,t.Lk)("td",x,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,"Discography Id: "+(0,t.v_)(l.id),1)]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,"Talents: "+(0,t.v_)(l.talents),1)])])])):(0,t.Q3)("",!0)],64)))),128)):((0,t.uX)(),(0,t.CE)("tr",T,[(0,t.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,M)]))]),(0,t.Lk)("tfoot",null,[(0,t.Lk)("tr",null,[a[8]||(a[8]=(0,t.Lk)("th",null,[(0,t.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.fields,(a=>((0,t.uX)(),(0,t.CE)("th",{key:a.key,id:a.key,onClick:l=>e.changeOrder(a.key)},[(0,t.eW)((0,t.v_)(a.value)+" ",1),e.orderBy===a.key&&"asc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",F,"▼")):e.orderBy===a.key&&"desc"===e.orderDirection?((0,t.uX)(),(0,t.CE)("span",O,"▲")):((0,t.uX)(),(0,t.CE)("span",N,"◆"))],8,V)))),128)),a[9]||(a[9]=(0,t.Lk)("th",null,"Action",-1))])])]),(0,t.bF)(s,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var B=l(1515),Q=(0,t.pM)({name:"DiscographyTable",components:{ModalComponent:h.A,TableComponent:y.A,PaginationComponent:v.A,NotificationComponent:L.A,ButtonSpinner:b.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:a}){const l=(0,t.KR)("released_date"),n=(0,t.KR)("desc"),o=(0,t.KR)(1),r=(0,t.KR)(20),s=(0,t.KR)(0),i=(0,t.KR)(0),c=(0,t.KR)(""),u=(0,t.KR)([]),d=(0,t.KR)([{key:"id",value:"Id"},{key:"name",value:"Name"},{key:"original_name",value:"original Name"},{key:"released_date",value:"Released Date"},{key:"album",value:"album"}]),p=(0,t.KR)([]),m=async()=>{c.value&&(o.value=1);const e=await B.K.getDiscographiesWithPaging(o.value,r.value,l.value,n.value,c.value);e.error||(p.value=e.items?e.items:[],s.value=e.totalItems,i.value=e.totalPages,r.value=r.value)},g=e=>{a("handleUpdate",e)},h=async e=>{const l=confirm(`Are you sure you want to delete Discography ${e}?`);l&&a("handleDelete",e)},y=e=>{o.value=e,m()},k=()=>{o.value=1,m()},v=e=>{e===l.value?"asc"===n.value?n.value="desc":"desc"===n.value?n.value="":n.value="asc":(l.value=e,n.value="asc"),m()},b=async e=>{r.value=e,o.value=1,await m()},L=e=>{u.value[e]=!u.value[e]};return(0,t.sV)((()=>{m()})),{currentPage:o,itemsPerPage:r,totalItems:s,totalPages:i,fields:d,items:p,search:c,orderBy:l,orderDirection:n,expandedRows:u,loadPage:y,changePageSize:b,onSearch:k,changeOrder:v,handleDelete:h,handleUpdate:g,getDiscographiesData:m,toggleDetails:L}}}),$=l(6262);const j=(0,$.A)(Q,[["render",J]]);var z=j,W=(0,t.pM)({name:"DiscographiesPage",components:{ModalComponent:h.A,TableComponent:y.A,PageTitleComponent:k.A,PaginationComponent:v.A,NotificationComponent:L.A,ButtonSpinner:b.A,TagSelectorComponent:f.A,DiscographyTable:z},setup(){const e=(0,t.KR)("Discographies"),a=(0,t.KR)("Dive into the Musical Journeys of Talented Artists Across Generations"),l=(0,t.KR)("pe-7s-musiclist icon-gradient bg-tempting-azure"),n=(0,t.KR)(!1),o=(0,t.KR)(!1),r=(0,t.KR)(null),s=(0,t.KR)(!1),i=(0,t.Kh)({name:null,original_name:null,released_date:null,album_id:null,lyricist:null,composer:null,arrangement:null,ensemble_as:null}),c=(0,t.KR)(null),u=(0,t.KR)([]),d=(0,t.KR)([]),p=(0,t.KR)([]),m=async()=>{const e=await B.K.getAlbums();u.value=e},g=async()=>{const e=await B.K.getTalents();d.value=e},h=async()=>{s.value=!0,n.value?k():y()},y=async()=>{try{await B.K.createDiscography(i,p.value),f(),C(),s.value=!1,r.value={title:"Success",content:"Discography created successfully!",type:"success"}}catch(e){s.value=!1,r.value={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}},k=async()=>{try{await B.K.updateDiscography(i,p.value),f(),C(),s.value=!1,r.value={title:"Success",content:"Discography updated successfully!",type:"success"},n.value=!1}catch(e){s.value=!1,r.value={title:"Error",content:`Error when updating Discography: ${e}`,type:"danger"},n.value=!1}},v=e=>{n.value=!0,e&&(i.id=e.id,i.name=e.name,i.original_name=e.original_name,i.agency_description=e.agency_description,i.released_date=e.released_date,i.album_id=e.album_id,i.lyricist=e.lyricist,i.composer=e.composer,i.arrangement=e.arrangement,i.ensemble_as=e.ensemble_as,p.value=e.discography_talent.map((e=>({id:e.talent.id,name:e.talent.name})))),o.value=!0},b=async e=>{try{await B.K.deleteDiscography(e),r.value={title:"Success",content:"Discography deleted successfully!",type:"success"},C()}catch(a){r.value={title:"Error",content:`Error when deleting Discography: ${a}`,type:"danger"}}},L=()=>{Object.assign(i,{name:null,original_name:null,released_date:null,album_id:null,lyricist:null,composer:null,arrangement:null,ensemble_as:null}),i.id&&delete i.id,p.value=[]},f=()=>{n.value=!1,L(),o.value=!o.value},C=()=>{c.value&&c.value.getDiscographiesData()},_=e=>{p.value=e};return(0,t.sV)((async()=>{await m(),await g()})),{heading:e,subheading:a,icon:l,isUpdateMode:n,showModal:o,onSubmit:s,albumOptions:u,talentOptions:d,selectedTalents:p,currentDiscography:i,notification:r,discographyTable:c,toggleModal:f,getAlbumsData:m,getTalentsData:g,handleSubmit:h,handleUpdateClick:v,handleDeleteClick:b,cleanCurrentDiscography:L,handleselectedTalentsChange:_}}});const H=(0,$.A)(W,[["render",g]]);var q=H}}]);