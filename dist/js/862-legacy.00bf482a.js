"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[862],{1071:function(e,a,t){t.r(a),t.d(a,{default:function(){return h}});var n=t(9726);const o={class:"position-relative form-group"};function s(e,a,t,s,i,l){const r=(0,n.g2)("modal-component"),m=(0,n.g2)("page-title-component"),g=(0,n.g2)("table-component"),u=(0,n.g2)("pagination-component");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(m,{heading:i.heading,subheading:i.subheading,icon:i.icon},{actions:(0,n.k6)((()=>[(0,n.Lk)("button",{type:"button",onClick:a[0]||(a[0]=(...e)=>l.openModal&&l.openModal(...e)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New "),(0,n.bF)(r,{title:"Create New",isOpen:i.showModal,onCloseModal:l.closeModal},{body:(0,n.k6)((()=>[(0,n.Lk)("div",o,[a[4]||(a[4]=(0,n.Lk)("label",{for:"name"},"Albumn Name",-1)),(0,n.bo)((0,n.Lk)("input",{name:"album_name",placeholder:"Albumn Name","onUpdate:modelValue":a[1]||(a[1]=e=>i.albumName=e),type:"text",class:"form-control"},null,512),[[n.Jo,i.albumName]])])])),footer:(0,n.k6)((()=>[(0,n.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"btn btn-primary"},"Cancel"),(0,n.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>l.createAlbum&&l.createAlbum(...e)),class:"btn btn-primary"},"Submit")])),_:1},8,["isOpen","onCloseModal"])])),_:1},8,["heading","subheading","icon"]),(0,n.bF)(g,{footer:!0,fields:i.fields,items:i.items},null,8,["fields","items"]),(0,n.bF)(u,{currentPage:i.currentPage,perPage:i.itemsPerPage,totalItems:i.totalItems,totalPages:i.totalPages,onLoadPage:l.loadPage,onChangePageSize:l.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])])}var i=t(3538),l=t(3304),r=t(6025),m=t(2874),g=t(9137),u={name:"AlbumsPage",components:{ModalComponent:i.A,TableComponent:l.A,PageTitleComponent:r.A,PaginationComponent:m.A},data(){return{showModal:!1,heading:"Albums",subheading:"Albums",icon:"pe-7s-phone icon-gradient bg-premium-dark",currentPage:1,itemsPerPage:20,totalItems:0,totalPages:0,albumName:"",fields:[{key:"id",value:"id"},{key:"name",value:"name"}],items:[]}},created(){this.getAlbumsData(this.currentPage,this.itemsPerPage)},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},async getAlbumsData(e,a){const t=(e-1)*a,n=t+a-1,{data:o,error:s}=await g.N.from("album").select("*").range(t,n);if(!s){this.totalItems=o.length;const e=o.map((e=>({...e,album:e.album?.name,talent:e.talent?.name})));this.items=e}},async createAlbum(){try{const{error:e}=await g.N.from("album").insert([{name:this.albumName}]);e?this.errorMessage=`Error: ${e.message}`:this.talentName="",this.getAlbumsData(this.currentPage,this.itemsPerPage),this.albumName=""}catch(e){this.errorMessage=`Unexpected error: ${e.message}`}},async handleChangeOrder({orderDirection:e,orderBy:a}){this.orderDirection=e,this.orderBy=a,await this.getAlbumsData(this.currentPage,this.itemsPerPage)},loadPage(e){this.currentPage=e,this.getAlbumsData(this.currentPage,this.itemsPerPage)},async changePageSize(e){this.itemsPerPage=e,await this.getAlbumsData(1,this.itemsPerPage)}}},c=t(6262);const d=(0,c.A)(u,[["render",s]]);var h=d}}]);