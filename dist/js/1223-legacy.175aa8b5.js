"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[1223],{1721:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(9726);const n={class:"notification-heading"},o={class:"notification-title"},i={class:"notification-content"};function s(e,a,t,s,r,c){return null!==e.notification?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,l.C4)(["notification",`alert-${e.notification.type}`])},[(0,l.Lk)("div",n,[(0,l.Lk)("div",o,(0,l.v_)(e.notification.title),1),(0,l.Lk)("button",{onClick:a[0]||(a[0]=(...a)=>e.closeNotification&&e.closeNotification(...a)),class:"close"},a[1]||(a[1]=[(0,l.Lk)("span",null,"×",-1)]))]),(0,l.Lk)("div",i,(0,l.v_)(e.notification.content),1)],2)):(0,l.Q3)("",!0)}var r=(0,l.pM)({name:"NotificationComponent",props:{notification:{type:Object,required:!1}},setup(e,{emit:a}){const t=()=>{a("update:notification",null)};return(0,l.wB)((()=>e.notification),(e=>{e&&setTimeout((()=>{t()}),2e3)})),{closeNotification:t}}}),c=t(6262);const u=(0,c.A)(r,[["render",s],["__scopeId","data-v-4cf65ca2"]]);var d=u},309:function(e,a,t){t.d(a,{A:function(){return m}});var l=t(9726);const n={class:"tag-container"},o={class:"tags"},i={key:0},s=["onClick"],r=["value"];function c(e,a,t,c,u,d){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",o,[0===e.selected.length?((0,l.uX)(),(0,l.CE)("div",i,"No selected value.")):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.selected,(a=>((0,l.uX)(),(0,l.CE)("span",{key:a.id,class:"tag"},[(0,l.eW)((0,l.v_)(a.name)+" ",1),(0,l.Lk)("button",{class:"remove-tag",onClick:t=>e.removeItem(a)},"x",8,s)])))),128))]),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"Search...","onUpdate:modelValue":a[0]||(a[0]=a=>e.searchQuery=a),onInput:a[1]||(a[1]=(...a)=>e.onSearch&&e.onSearch(...a)),class:"form-control search-input"},null,544),[[l.Jo,e.searchQuery]]),e.showOptions?((0,l.uX)(),(0,l.CE)("select",{key:0,onChange:a[2]||(a[2]=(...a)=>e.updateSelectedItems&&e.updateSelectedItems(...a)),multiple:"",class:"form-control"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filteredItems,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,r)))),128))],32)):(0,l.Q3)("",!0)])}var u=(0,l.pM)({name:"TagSelector",props:{items:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},setup(e,{emit:a}){const t=(0,l.KR)([...e.modelValue]),n=(0,l.KR)(""),o=(0,l.KR)(!1),i=(0,l.EW)((()=>e.items.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase()))))),s=e=>t.value.some((a=>a.id===e.id)),r=e=>{t.value=t.value.filter((a=>a.id!==e.id)),a("update:modelValue",t.value)},c=()=>{o.value=""!==n.value.trim()&&i.value.length>0},u=l=>{const n=Array.from(l.target.selectedOptions);n.forEach((a=>{const l=a.value,n=e.items.find((e=>e.id===l));n&&(s(n)?t.value=t.value.filter((e=>e.id!==n.id)):t.value.push(n))})),a("update:modelValue",t.value)};return(0,l.wB)((()=>e.modelValue),(e=>{t.value=[...e]}),{immediate:!0}),{selected:t,searchQuery:n,filteredItems:i,showOptions:o,onSearch:c,removeItem:r,updateSelectedItems:u,isSelected:s}}}),d=t(6262);const p=(0,d.A)(u,[["render",c],["__scopeId","data-v-286852e2"]]);var m=p},2026:function(e,a,t){t.r(a),t.d(a,{default:function(){return q}});var l=t(9726);const n={class:"position-relative form-group"},o={class:"position-relative form-group"},i={class:"position-relative form-group"},s={class:"position-relative form-group"},r={class:"position-relative form-group"},c={class:"position-relative form-group"},u={class:"position-relative form-group"},d={class:"position-relative form-group"},p=["value"],m={class:"position-relative form-group"};function g(e,a,t,g,h,y){const v=(0,l.g2)("page-title-component"),k=(0,l.g2)("NotificationComponent"),b=(0,l.g2)("TagSelectorComponent"),f=(0,l.g2)("button-spinner"),L=(0,l.g2)("modal-component"),C=(0,l.g2)("DiscographyTable");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(v,{heading:e.heading,subheading:e.subheading,icon:e.icon},{actions:(0,l.k6)((()=>[(0,l.Lk)("button",{type:"button",onClick:a[0]||(a[0]=(...a)=>e.toggleModal&&e.toggleModal(...a)),class:"btn-shadow d-inline-flex align-items-center btn btn-primary"}," Create New ")])),_:1},8,["heading","subheading","icon"]),(0,l.bF)(k,{notification:e.notification,"onUpdate:notification":a[1]||(a[1]=a=>e.notification=a)},null,8,["notification"]),(0,l.bF)(L,{title:e.isUpdateMode?"Update Discography":"Add New Discography",isOpen:e.showModal,onCloseModal:e.toggleModal},{body:(0,l.k6)((()=>[(0,l.Lk)("div",n,[a[11]||(a[11]=(0,l.Lk)("label",{for:"discography_name"},"Discography Name",-1)),(0,l.bo)((0,l.Lk)("input",{name:"discography_name",id:"discography_name",placeholder:"Discography Name","onUpdate:modelValue":a[2]||(a[2]=a=>e.currentDiscography.name=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.name]])]),(0,l.Lk)("div",o,[a[12]||(a[12]=(0,l.Lk)("label",{for:"original_name"},"Original Name",-1)),(0,l.bo)((0,l.Lk)("input",{name:"original_name",id:"original_name",placeholder:"Original Name","onUpdate:modelValue":a[3]||(a[3]=a=>e.currentDiscography.original_name=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.original_name]])]),(0,l.Lk)("div",i,[a[13]||(a[13]=(0,l.Lk)("label",{for:"released_date"},"Released Date",-1)),(0,l.bo)((0,l.Lk)("input",{name:"released_date",id:"released_date",placeholder:"Released Date","onUpdate:modelValue":a[4]||(a[4]=a=>e.currentDiscography.released_date=a),type:"date",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.released_date]])]),(0,l.Lk)("div",s,[a[14]||(a[14]=(0,l.Lk)("label",{for:"lyricist"},"Lyricist",-1)),(0,l.bo)((0,l.Lk)("input",{name:"lyricist",id:"lyricist",placeholder:"lyricist","onUpdate:modelValue":a[5]||(a[5]=a=>e.currentDiscography.lyricist=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.lyricist]])]),(0,l.Lk)("div",r,[a[15]||(a[15]=(0,l.Lk)("label",{for:"composer"},"Composer",-1)),(0,l.bo)((0,l.Lk)("input",{name:"composer",id:"composer",placeholder:"Composer","onUpdate:modelValue":a[6]||(a[6]=a=>e.currentDiscography.composer=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.composer]])]),(0,l.Lk)("div",c,[a[16]||(a[16]=(0,l.Lk)("label",{for:"arrangement"},"Arrangement",-1)),(0,l.bo)((0,l.Lk)("input",{name:"arrangement",id:"arrangement",placeholder:"Arrangement","onUpdate:modelValue":a[7]||(a[7]=a=>e.currentDiscography.arrangement=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.arrangement]])]),(0,l.Lk)("div",u,[a[17]||(a[17]=(0,l.Lk)("label",{for:"ensemble_as"},"ensemble_as",-1)),(0,l.bo)((0,l.Lk)("input",{name:"ensemble_as",id:"ensemble_as",placeholder:"Ensemble As","onUpdate:modelValue":a[8]||(a[8]=a=>e.currentDiscography.ensemble_as=a),type:"text",class:"form-control"},null,512),[[l.Jo,e.currentDiscography.ensemble_as]])]),(0,l.Lk)("div",d,[a[19]||(a[19]=(0,l.Lk)("label",{for:"album"},"Album",-1)),(0,l.bo)((0,l.Lk)("select",{name:"select",id:"album","onUpdate:modelValue":a[9]||(a[9]=a=>e.currentDiscography.album_id=a),class:"form-control"},[a[18]||(a[18]=(0,l.Lk)("option",{value:null},null,-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.albumOptions,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,l.v_)(e.name),9,p)))),128))],512),[[l.u1,e.currentDiscography.album_id]])]),(0,l.Lk)("div",m,[a[20]||(a[20]=(0,l.Lk)("label",{for:"talent"},"Talent",-1)),(0,l.bF)(b,{items:e.talentOptions,"model-value":e.selectedTalents,"onUpdate:modelValue":e.handleselectedTalentsChange},null,8,["items","model-value","onUpdate:modelValue"])])])),footer:(0,l.k6)((()=>[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[10]||(a[10]=(...a)=>e.toggleModal&&e.toggleModal(...a))},"Cancel"),(0,l.bF)(f,{isLoading:e.onSubmit,buttonClass:"btn btn-primary",onClick:e.handleSubmit,normalText:e.isUpdateMode?"Update Discography":"Add New Discography"},null,8,["isLoading","onClick","normalText"])])),_:1},8,["title","isOpen","onCloseModal"]),(0,l.bF)(C,{ref:"discographyTable",onHandleUpdate:e.handleUpdateClick,onHandleDelete:e.handleDeleteClick},null,8,["onHandleUpdate","onHandleDelete"])])}var h=t(1313),y=t(9794),v=t(8277),k=t(9274),b=t(6423),f=t(1721),L=t(309);const C={class:"form-inline"},_={class:"input-group mb-2"},D={class:"table table-hover table-sm table-bordered"},K=["id","onClick"],E={key:0},A={key:1},w={key:2},R=["href"],P=["href"],S=["onClick"],U=["onClick"],X=["onClick"],I={key:0,class:"details-row"},T={colspan:"9"},x={key:1},M=["colspan"],V=["id","onClick"],N={key:0},O={key:1},F={key:2};function J(e,a,t,n,o,i){const s=(0,l.g2)("pagination-component");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",C,[(0,l.Lk)("div",_,[(0,l.bo)((0,l.Lk)("input",{placeholder:"Searching...",onInput:a[0]||(a[0]=(...a)=>e.onSearch&&e.onSearch(...a)),"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),type:"text",class:"form-control",name:"search"},null,544),[[l.Jo,e.search]]),a[2]||(a[2]=(0,l.Lk)("div",{class:"input-group-append"},[(0,l.Lk)("button",{class:"btn btn-primary"},[(0,l.Lk)("i",{class:"pe-7s-search"})])],-1))])]),(0,l.Lk)("table",D,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[a[3]||(a[3]=(0,l.Lk)("th",null,[(0,l.Lk)("input",{type:"checkbox",class:"",name:"checkbox"})],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,(a=>((0,l.uX)(),(0,l.CE)("th",{key:a.key,id:a.key,onClick:t=>e.changeOrder(a.key)},[(0,l.eW)((0,l.v_)(a.value)+" ",1),e.orderBy===a.key&&"asc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",E,"▼")):e.orderBy===a.key&&"desc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",A,"▲")):((0,l.uX)(),(0,l.CE)("span",w,"◆"))],8,K)))),128)),a[4]||(a[4]=(0,l.Lk)("th",null,"Action",-1))])]),(0,l.Lk)("tbody",null,[e.items.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.items,((t,n)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:n},[(0,l.Lk)("tr",null,[a[7]||(a[7]=(0,l.Lk)("td",null,[(0,l.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),(0,l.Lk)("td",null,(0,l.v_)(t.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("a",{href:`discography/${t.id}`},(0,l.v_)(t.name),9,R)]),(0,l.Lk)("td",null,(0,l.v_)(t.original_name),1),(0,l.Lk)("td",null,(0,l.v_)(t.released_date),1),(0,l.Lk)("td",null,[(0,l.Lk)("a",{href:`album/${t.album_id}`},(0,l.v_)(t.album),9,P)]),(0,l.Lk)("td",null,[(0,l.Lk)("button",{type:"button",class:"btn btn-sm btn-success",onClick:a=>e.handleUpdate(t)},a[5]||(a[5]=[(0,l.Lk)("i",{class:"pe-7s-file"},null,-1)]),8,S),(0,l.Lk)("button",{type:"button",class:"btn btn-sm btn-warning",onClick:a=>e.handleDelete(t.id)},a[6]||(a[6]=[(0,l.Lk)("i",{class:"pe-7s-trash"},null,-1)]),8,U),(0,l.Lk)("button",{type:"button",onClick:a=>e.toggleDetails(n),class:"btn btn-sm btn-info"},[(0,l.Lk)("i",{class:(0,l.C4)(["pe-7s-angle-right",e.expandedRows[n]?"rotate-icon":""])},null,2)],8,X)])]),e.expandedRows[n]?((0,l.uX)(),(0,l.CE)("tr",I,[(0,l.Lk)("td",T,[(0,l.Lk)("div",null,[(0,l.Lk)("p",null,"Discography Id: "+(0,l.v_)(t.id),1)]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,"Talents: "+(0,l.v_)(t.talents),1)])])])):(0,l.Q3)("",!0)],64)))),128)):((0,l.uX)(),(0,l.CE)("tr",x,[(0,l.Lk)("td",{colspan:e.fields.length+2,class:"text-center"},"No records found",8,M)]))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",null,[a[8]||(a[8]=(0,l.Lk)("th",null,[(0,l.Lk)("input",{type:"checkbox",name:"checkbox"})],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fields,(a=>((0,l.uX)(),(0,l.CE)("th",{key:a.key,id:a.key,onClick:t=>e.changeOrder(a.key)},[(0,l.eW)((0,l.v_)(a.value)+" ",1),e.orderBy===a.key&&"asc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",N,"▼")):e.orderBy===a.key&&"desc"===e.orderDirection?((0,l.uX)(),(0,l.CE)("span",O,"▲")):((0,l.uX)(),(0,l.CE)("span",F,"◆"))],8,V)))),128)),a[9]||(a[9]=(0,l.Lk)("th",null,"Action",-1))])])]),(0,l.bF)(s,{currentPage:e.currentPage,perPage:e.itemsPerPage,totalItems:e.totalItems,totalPages:e.totalPages,onLoadPage:e.loadPage,onChangePageSize:e.changePageSize},null,8,["currentPage","perPage","totalItems","totalPages","onLoadPage","onChangePageSize"])],64)}var B=t(7189),Q=(0,l.pM)({name:"DiscographyTable",components:{ModalComponent:h.A,TableComponent:y.A,PaginationComponent:k.A,NotificationComponent:f.A,ButtonSpinner:b.A},emits:["handleUpdate","handleDelete"],setup(e,{emit:a}){const t=(0,l.KR)("released_date"),n=(0,l.KR)("desc"),o=(0,l.KR)(1),i=(0,l.KR)(20),s=(0,l.KR)(0),r=(0,l.KR)(0),c=(0,l.KR)(""),u=(0,l.KR)([]),d=(0,l.KR)([{key:"id",value:"Id"},{key:"name",value:"Name"},{key:"original_name",value:"original Name"},{key:"released_date",value:"Released Date"},{key:"album",value:"album"}]),p=(0,l.KR)([]),m=async()=>{c.value&&(o.value=1);const e=await B.K.getDiscographiesWithPaging(o.value,i.value,t.value,n.value,c.value);e.error||(p.value=e.items?e.items:[],s.value=e.totalItems,r.value=e.totalPages,i.value=i.value)},g=e=>{a("handleUpdate",e)},h=async e=>{const t=confirm(`Are you sure you want to delete Discography ${e}?`);t&&a("handleDelete",e)},y=e=>{o.value=e,m()},v=()=>{o.value=1,m()},k=e=>{e===t.value?"asc"===n.value?n.value="desc":"desc"===n.value?n.value="":n.value="asc":(t.value=e,n.value="asc"),m()},b=async e=>{i.value=e,o.value=1,await m()},f=e=>{u.value[e]=!u.value[e]};return(0,l.sV)((()=>{m()})),{currentPage:o,itemsPerPage:i,totalItems:s,totalPages:r,fields:d,items:p,search:c,orderBy:t,orderDirection:n,expandedRows:u,loadPage:y,changePageSize:b,onSearch:v,changeOrder:k,handleDelete:h,handleUpdate:g,getDiscographiesData:m,toggleDetails:f}}}),$=t(6262);const j=(0,$.A)(Q,[["render",J]]);var z=j,W=(0,l.pM)({name:"DiscographiesPage",components:{ModalComponent:h.A,TableComponent:y.A,PageTitleComponent:v.A,PaginationComponent:k.A,NotificationComponent:f.A,ButtonSpinner:b.A,TagSelectorComponent:L.A,DiscographyTable:z},setup(){const e=(0,l.KR)("Discographies"),a=(0,l.KR)("Dive into the Musical Journeys of Talented Artists Across Generations"),t=(0,l.KR)("pe-7s-musiclist icon-gradient bg-tempting-azure"),n=(0,l.KR)(!1),o=(0,l.KR)(!1),i=(0,l.KR)(null),s=(0,l.KR)(!1),r=(0,l.Kh)({name:null,original_name:null,released_date:null,album_id:null,lyricist:null,composer:null,arrangement:null,ensemble_as:null}),c=(0,l.KR)(null),u=(0,l.KR)([]),d=(0,l.KR)([]),p=(0,l.KR)([]),m=async()=>{const e=await B.K.getAlbums();u.value=e},g=async()=>{const e=await B.K.getTalents();d.value=e},h=async()=>{s.value=!0,n.value?v():y()},y=async()=>{try{await B.K.createDiscography(r,p.value),L(),C(),s.value=!1,i.value={title:"Success",content:"Discography created successfully!",type:"success"}}catch(e){s.value=!1,i.value={title:"Error",content:`Error when submitting talent: ${e}`,type:"danger"}}},v=async()=>{try{await B.K.updateDiscography(r,p.value),L(),C(),s.value=!1,i.value={title:"Success",content:"Discography updated successfully!",type:"success"},n.value=!1}catch(e){s.value=!1,i.value={title:"Error",content:`Error when updating Discography: ${e}`,type:"danger"},n.value=!1}},k=e=>{n.value=!0,e&&(r.id=e.id,r.name=e.name,r.original_name=e.original_name,r.agency_description=e.agency_description,r.released_date=e.released_date,r.album_id=e.album_id,r.lyricist=e.lyricist,r.composer=e.composer,r.arrangement=e.arrangement,r.ensemble_as=e.ensemble_as,p.value=e.discography_talent.map((e=>({id:e.talent.id,name:e.talent.name})))),o.value=!0},b=async e=>{try{await B.K.deleteDiscography(e),i.value={title:"Success",content:"Discography deleted successfully!",type:"success"},C()}catch(a){i.value={title:"Error",content:`Error when deleting Discography: ${a}`,type:"danger"}}},f=()=>{Object.assign(r,{name:null,original_name:null,released_date:null,album_id:null,lyricist:null,composer:null,arrangement:null,ensemble_as:null}),r.id&&delete r.id,p.value=[]},L=()=>{n.value=!1,f(),o.value=!o.value},C=()=>{c.value&&c.value.getDiscographiesData()},_=e=>{p.value=e};return(0,l.sV)((async()=>{await m(),await g()})),{heading:e,subheading:a,icon:t,isUpdateMode:n,showModal:o,onSubmit:s,albumOptions:u,talentOptions:d,selectedTalents:p,currentDiscography:r,notification:i,discographyTable:c,toggleModal:L,getAlbumsData:m,getTalentsData:g,handleSubmit:h,handleUpdateClick:k,handleDeleteClick:b,cleanCurrentDiscography:f,handleselectedTalentsChange:_}}});const H=(0,$.A)(W,[["render",g]]);var q=H}}]);