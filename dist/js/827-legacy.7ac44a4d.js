"use strict";(self["webpackChunkjoshua_vue_project"]=self["webpackChunkjoshua_vue_project"]||[]).push([[827],{8277:function(e,a,t){t.d(a,{A:function(){return m}});var n=t(9726);const r={class:"app-page-title"},l={class:"page-title-wrapper"},i={class:"page-title-heading"},o={class:"page-title-icon"},u={class:"page-title-subheading"},c={class:"page-title-actions"};function s(e,a,t,s,d,g){return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("div",l,[(0,n.Lk)("div",i,[(0,n.Lk)("div",o,[(0,n.Lk)("i",{class:(0,n.C4)(e.icon)},null,2)]),(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,(0,n.v_)(e.heading),1),(0,n.Lk)("div",u,(0,n.v_)(e.subheading),1)])]),(0,n.Lk)("div",c,[(0,n.RG)(e.$slots,"actions"),(0,n.Lk)("button",{type:"button",class:"btn-shadow ml-2 btn btn-primary",onClick:a[0]||(a[0]=(...a)=>e.goBack&&e.goBack(...a))},a[1]||(a[1]=[(0,n.Lk)("i",{class:"pe-7s-back"},null,-1)]))])])])}var d=t(5220),g=(0,n.pM)({name:"PageTitleComponent",props:{icon:{type:String,required:!0},heading:{type:String,required:!0},subheading:{type:String,default:""},showImport:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1}},setup(e){const{icon:a,heading:t,subheading:r,showImport:l,showExport:i}=(0,n.QW)(e),o=(0,d.rd)(),u=()=>{o.back()};return{icon:a,heading:t,subheading:r,showImport:l,showExport:i,goBack:u}}}),h=t(6262);const p=(0,h.A)(g,[["render",s]]);var m=p},827:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var n=t(9726);const r={key:0},l={key:0},i=["src","alt"],o={key:1},u={key:1};function c(e,a,t,c,s,d){const g=(0,n.g2)("page-title-component");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(g,{heading:e.heading,subheading:e.subheading,icon:e.icon},null,8,["heading","subheading","icon"]),e.album?((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("div",null,[(0,n.Lk)("input",{type:"file",onChange:a[0]||(a[0]=(...a)=>e.handleFileChange&&e.handleFileChange(...a))},null,32),(0,n.Lk)("button",{onClick:a[1]||(a[1]=(...a)=>e.handleFileUpload&&e.handleFileUpload(...a))},"Upload"),e.imageUrl?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("img",{src:e.imageUrl,width:"200",height:"200",alt:e.album.name},null,8,i)])):((0,n.uX)(),(0,n.CE)("div",o,a[2]||(a[2]=[(0,n.Lk)("p",null,"No image uploaded yet.",-1)])))]),(0,n.Lk)("h1",null,(0,n.v_)(e.album.name),1)])):((0,n.uX)(),(0,n.CE)("div",u,a[3]||(a[3]=[(0,n.Lk)("p",null,"Loading album details...",-1)])))],64)}var s=t(8277),d=t(1515),g=t(9137);const h={async uploadImage(e,a,t){try{const n=`${a}`,{data:r,error:l}=await g.N.storage.from(t).upload(n,e);if(l)throw l;return r}catch(n){return null}},async downloadImage(e,a){try{const{data:t,error:n}=await g.N.storage.from(a).download(e);if(n)throw n;const r=URL.createObjectURL(t);return r}catch(t){return null}},async deleteImage(e,a){try{const{data:t,error:n}=await g.N.storage.from(a).remove([e]);if(n)throw n;return t}catch(t){return null}},async getPublicImageUrl(e,a){try{const{publicURL:t,error:n}=await g.N.storage.from(e).getPublicUrl(a);if(n)throw n;return t}catch(t){return null}},async getSignedImageUrl(e,a,t=3600){try{const{data:n,error:r}=await g.N.storage.from(e).createSignedUrl(a,t);if(r)throw r;return n.signedUrl}catch(n){return null}}};var p=(0,n.pM)({name:"AlbumDetailPage",components:{PageTitleComponent:s.A},props:{id:{type:String,required:!0}},setup(e){const a=(0,n.KR)("Album"),t=(0,n.KR)("Album"),r=(0,n.KR)("pe-7s-user icon-gradient bg-tempting-azure"),l=(0,n.KR)(null),i=(0,n.KR)(null),o=(0,n.KR)(""),u=e=>{i.value=e.target.files[0]},c=async()=>{if(i.value)try{await h.uploadImage(i.value,e.id,"album"),g(e.id)}catch(a){console.error("Error uploading image:",a)}},s=async e=>{try{const a=await d.K.getAlbumById(e);l.value=a,a&&await g(e)}catch(a){console.error("Error fetching album:",a)}},g=async e=>{try{const a=await h.getSignedImageUrl("album",e);a&&(o.value=a)}catch(a){console.error("Error loading existing image:",a)}};return(0,n.sV)((async()=>{e.id&&(await s(e.id),l.value&&(a.value+=` ${l.value.name}`))})),{heading:a,subheading:t,icon:r,album:l,file:i,imageUrl:o,handleFileChange:u,handleFileUpload:c,loadImage:g}}}),m=t(6262);const b=(0,m.A)(p,[["render",c]]);var v=b}}]);